<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 9 Visualização de dados na prática | Introdução à Ciência de Dados</title>
  <meta name="description" content="Este livro apresenta conceitos e habilidades que ajudarão você a enfrentar os desafios da vida real em análise de dados. Ele abrange conceitos de probabilidade, inferência estatística, regressão linear e aprendizado de máquina. Além disso, permitirá que você desenvolva habilidades como programação em R, manipulação de dados com dplyr, visualização de dados com ggplot2, organização de arquivos no ambiente UNIX/Linux, controle de versão com GitHub e elaboração de documentos reprodutíveis com Rmarkdown." />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 9 Visualização de dados na prática | Introdução à Ciência de Dados" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este livro apresenta conceitos e habilidades que ajudarão você a enfrentar os desafios da vida real em análise de dados. Ele abrange conceitos de probabilidade, inferência estatística, regressão linear e aprendizado de máquina. Além disso, permitirá que você desenvolva habilidades como programação em R, manipulação de dados com dplyr, visualização de dados com ggplot2, organização de arquivos no ambiente UNIX/Linux, controle de versão com GitHub e elaboração de documentos reprodutíveis com Rmarkdown." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 9 Visualização de dados na prática | Introdução à Ciência de Dados" />
  
  <meta name="twitter:description" content="Este livro apresenta conceitos e habilidades que ajudarão você a enfrentar os desafios da vida real em análise de dados. Ele abrange conceitos de probabilidade, inferência estatística, regressão linear e aprendizado de máquina. Além disso, permitirá que você desenvolva habilidades como programação em R, manipulação de dados com dplyr, visualização de dados com ggplot2, organização de arquivos no ambiente UNIX/Linux, controle de versão com GitHub e elaboração de documentos reprodutíveis com Rmarkdown." />
  

<meta name="author" content="Rafael A. Irizarry" />


<meta name="date" content="2020-06-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="distributions.html"/>
<link rel="next" href="princípios-de-visualização-de-dados.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introdução à Ciência de Dados</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefácio</a></li>
<li class="chapter" data-level="" data-path="agradecimentos.html"><a href="agradecimentos.html"><i class="fa fa-check"></i>Agradecimentos</a></li>
<li class="chapter" data-level="" data-path="introdução.html"><a href="introdução.html"><i class="fa fa-check"></i>Introdução</a>
<ul>
<li class="chapter" data-level="" data-path="introdução.html"><a href="introdução.html#estudos-de-caso"><i class="fa fa-check"></i>Estudos de Caso</a></li>
<li class="chapter" data-level="" data-path="introdução.html"><a href="introdução.html#quem-achará-este-livro-útil"><i class="fa fa-check"></i>Quem achará este livro útil?</a></li>
<li class="chapter" data-level="" data-path="introdução.html"><a href="introdução.html#o-que-este-livro-cobre"><i class="fa fa-check"></i>O que este livro cobre?</a></li>
<li class="chapter" data-level="" data-path="introdução.html"><a href="introdução.html#o-que-este-livro-não-cobre"><i class="fa fa-check"></i>O que este livro não cobre?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Introdução ao R e RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#por-que-r"><i class="fa fa-check"></i><b>1.1</b> Por que R?</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#o-console-do-r"><i class="fa fa-check"></i><b>1.2</b> O console do R</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#scripts"><i class="fa fa-check"></i><b>1.3</b> <em>Scripts</em></a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#rstudio"><i class="fa fa-check"></i><b>1.4</b> RStudio</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="getting-started.html"><a href="getting-started.html#painéis"><i class="fa fa-check"></i><b>1.4.1</b> Painéis</a></li>
<li class="chapter" data-level="1.4.2" data-path="getting-started.html"><a href="getting-started.html#combinações-de-teclas-atalhos"><i class="fa fa-check"></i><b>1.4.2</b> Combinações de teclas (atalhos)</a></li>
<li class="chapter" data-level="1.4.3" data-path="getting-started.html"><a href="getting-started.html#como-executar-comandos-enquanto-edita-scripts"><i class="fa fa-check"></i><b>1.4.3</b> Como executar comandos enquanto edita <em>scripts</em></a></li>
<li class="chapter" data-level="1.4.4" data-path="getting-started.html"><a href="getting-started.html#como-alterar-opções-globais"><i class="fa fa-check"></i><b>1.4.4</b> Como alterar opções globais</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#instalando-pacotes-r"><i class="fa fa-check"></i><b>1.5</b> Instalando pacotes R</a></li>
</ul></li>
<li class="part"><span><b>I R</b></span></li>
<li class="chapter" data-level="2" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>2</b> R básico</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-basics.html"><a href="r-basics.html#estudo-de-caso-assassinatos-por-armas-nos-eua"><i class="fa fa-check"></i><b>2.1</b> Estudo de caso: assassinatos por armas nos EUA</a></li>
<li class="chapter" data-level="2.2" data-path="r-basics.html"><a href="r-basics.html#os-princípios-básicos"><i class="fa fa-check"></i><b>2.2</b> Os princípios básicos</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r-basics.html"><a href="r-basics.html#objetos"><i class="fa fa-check"></i><b>2.2.1</b> Objetos</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-basics.html"><a href="r-basics.html#a-área-de-trabalho-workspace"><i class="fa fa-check"></i><b>2.2.2</b> A área de trabalho (<em>workspace</em>)</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-basics.html"><a href="r-basics.html#funções"><i class="fa fa-check"></i><b>2.2.3</b> Funções</a></li>
<li class="chapter" data-level="2.2.4" data-path="r-basics.html"><a href="r-basics.html#outros-objetos-pré-construídos"><i class="fa fa-check"></i><b>2.2.4</b> Outros objetos pré-construídos</a></li>
<li class="chapter" data-level="2.2.5" data-path="r-basics.html"><a href="r-basics.html#nomes-de-variáveis"><i class="fa fa-check"></i><b>2.2.5</b> Nomes de variáveis</a></li>
<li class="chapter" data-level="2.2.6" data-path="r-basics.html"><a href="r-basics.html#como-salvar-sua-área-de-trabalho"><i class="fa fa-check"></i><b>2.2.6</b> Como salvar sua área de trabalho</a></li>
<li class="chapter" data-level="2.2.7" data-path="r-basics.html"><a href="r-basics.html#fundamentando-o-uso-de-scripts"><i class="fa fa-check"></i><b>2.2.7</b> Fundamentando o uso de <em>scripts</em></a></li>
<li class="chapter" data-level="2.2.8" data-path="r-basics.html"><a href="r-basics.html#como-comentar-seu-código"><i class="fa fa-check"></i><b>2.2.8</b> Como comentar seu código</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-basics.html"><a href="r-basics.html#exercícios"><i class="fa fa-check"></i><b>2.3</b> Exercícios</a></li>
<li class="chapter" data-level="2.4" data-path="r-basics.html"><a href="r-basics.html#tipos-de-dados"><i class="fa fa-check"></i><b>2.4</b> Tipos de dados</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="r-basics.html"><a href="r-basics.html#data-frames"><i class="fa fa-check"></i><b>2.4.1</b> <em>Data frames</em></a></li>
<li class="chapter" data-level="2.4.2" data-path="r-basics.html"><a href="r-basics.html#examinando-um-objeto"><i class="fa fa-check"></i><b>2.4.2</b> Examinando um objeto</a></li>
<li class="chapter" data-level="2.4.3" data-path="r-basics.html"><a href="r-basics.html#o-operador-de-acesso"><i class="fa fa-check"></i><b>2.4.3</b> O operador de acesso: <code>$</code></a></li>
<li class="chapter" data-level="2.4.4" data-path="r-basics.html"><a href="r-basics.html#vetores-numéricos-caracteres-e-lógicos"><i class="fa fa-check"></i><b>2.4.4</b> Vetores: numéricos, caracteres e lógicos</a></li>
<li class="chapter" data-level="2.4.5" data-path="r-basics.html"><a href="r-basics.html#fatores-factors"><i class="fa fa-check"></i><b>2.4.5</b> Fatores (<em>factors</em>)</a></li>
<li class="chapter" data-level="2.4.6" data-path="r-basics.html"><a href="r-basics.html#listas"><i class="fa fa-check"></i><b>2.4.6</b> Listas</a></li>
<li class="chapter" data-level="2.4.7" data-path="r-basics.html"><a href="r-basics.html#matrizes"><i class="fa fa-check"></i><b>2.4.7</b> Matrizes</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="r-basics.html"><a href="r-basics.html#exercícios-1"><i class="fa fa-check"></i><b>2.5</b> Exercícios</a></li>
<li class="chapter" data-level="2.6" data-path="r-basics.html"><a href="r-basics.html#vetores"><i class="fa fa-check"></i><b>2.6</b> Vetores</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="r-basics.html"><a href="r-basics.html#como-criar-vetores"><i class="fa fa-check"></i><b>2.6.1</b> Como criar vetores</a></li>
<li class="chapter" data-level="2.6.2" data-path="r-basics.html"><a href="r-basics.html#nomes"><i class="fa fa-check"></i><b>2.6.2</b> Nomes</a></li>
<li class="chapter" data-level="2.6.3" data-path="r-basics.html"><a href="r-basics.html#sequências"><i class="fa fa-check"></i><b>2.6.3</b> Sequências</a></li>
<li class="chapter" data-level="2.6.4" data-path="r-basics.html"><a href="r-basics.html#como-criar-um-subconjunto"><i class="fa fa-check"></i><b>2.6.4</b> Como criar um subconjunto</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="r-basics.html"><a href="r-basics.html#conversão-forçada"><i class="fa fa-check"></i><b>2.7</b> Conversão forçada</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="r-basics.html"><a href="r-basics.html#não-disponível-na"><i class="fa fa-check"></i><b>2.7.1</b> <em>Não disponível</em> (NA)</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="r-basics.html"><a href="r-basics.html#exercícios-2"><i class="fa fa-check"></i><b>2.8</b> Exercícios</a></li>
<li class="chapter" data-level="2.9" data-path="r-basics.html"><a href="r-basics.html#ordenação"><i class="fa fa-check"></i><b>2.9</b> <em>Ordenação</em></a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="r-basics.html"><a href="r-basics.html#sort"><i class="fa fa-check"></i><b>2.9.1</b> <code>sort</code></a></li>
<li class="chapter" data-level="2.9.2" data-path="r-basics.html"><a href="r-basics.html#order"><i class="fa fa-check"></i><b>2.9.2</b> <code>order</code></a></li>
<li class="chapter" data-level="2.9.3" data-path="r-basics.html"><a href="r-basics.html#max-e-which.max"><i class="fa fa-check"></i><b>2.9.3</b> <code>max</code> e <code>which.max</code></a></li>
<li class="chapter" data-level="2.9.4" data-path="r-basics.html"><a href="r-basics.html#rank"><i class="fa fa-check"></i><b>2.9.4</b> <code>rank</code></a></li>
<li class="chapter" data-level="2.9.5" data-path="r-basics.html"><a href="r-basics.html#cuidado-com-a-reciclagem"><i class="fa fa-check"></i><b>2.9.5</b> Cuidado com a reciclagem</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="r-basics.html"><a href="r-basics.html#exercícios-3"><i class="fa fa-check"></i><b>2.10</b> Exercícios</a></li>
<li class="chapter" data-level="2.11" data-path="r-basics.html"><a href="r-basics.html#aritmética-vetorial"><i class="fa fa-check"></i><b>2.11</b> Aritmética vetorial</a>
<ul>
<li class="chapter" data-level="2.11.1" data-path="r-basics.html"><a href="r-basics.html#rescalar-um-vetor"><i class="fa fa-check"></i><b>2.11.1</b> <em>Rescalar</em> um vetor</a></li>
<li class="chapter" data-level="2.11.2" data-path="r-basics.html"><a href="r-basics.html#dois-vetores"><i class="fa fa-check"></i><b>2.11.2</b> Dois vetores</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="r-basics.html"><a href="r-basics.html#exercícios-4"><i class="fa fa-check"></i><b>2.12</b> Exercícios</a></li>
<li class="chapter" data-level="2.13" data-path="r-basics.html"><a href="r-basics.html#indexação"><i class="fa fa-check"></i><b>2.13</b> Indexação</a>
<ul>
<li class="chapter" data-level="2.13.1" data-path="r-basics.html"><a href="r-basics.html#criar-subconjuntos-com-lógicas"><i class="fa fa-check"></i><b>2.13.1</b> Criar subconjuntos com lógicas</a></li>
<li class="chapter" data-level="2.13.2" data-path="r-basics.html"><a href="r-basics.html#operadores-lógicos"><i class="fa fa-check"></i><b>2.13.2</b> Operadores lógicos</a></li>
<li class="chapter" data-level="2.13.3" data-path="r-basics.html"><a href="r-basics.html#which"><i class="fa fa-check"></i><b>2.13.3</b> <code>which</code></a></li>
<li class="chapter" data-level="2.13.4" data-path="r-basics.html"><a href="r-basics.html#match"><i class="fa fa-check"></i><b>2.13.4</b> <code>match</code></a></li>
<li class="chapter" data-level="2.13.5" data-path="r-basics.html"><a href="r-basics.html#in"><i class="fa fa-check"></i><b>2.13.5</b> <code>%in%</code></a></li>
</ul></li>
<li class="chapter" data-level="2.14" data-path="r-basics.html"><a href="r-basics.html#exercícios-5"><i class="fa fa-check"></i><b>2.14</b> Exercícios</a></li>
<li class="chapter" data-level="2.15" data-path="r-basics.html"><a href="r-basics.html#gráficos-básicos"><i class="fa fa-check"></i><b>2.15</b> Gráficos básicos</a>
<ul>
<li class="chapter" data-level="2.15.1" data-path="r-basics.html"><a href="r-basics.html#plot"><i class="fa fa-check"></i><b>2.15.1</b> <code>plot</code></a></li>
<li class="chapter" data-level="2.15.2" data-path="r-basics.html"><a href="r-basics.html#hist"><i class="fa fa-check"></i><b>2.15.2</b> <code>hist</code></a></li>
<li class="chapter" data-level="2.15.3" data-path="r-basics.html"><a href="r-basics.html#boxplot"><i class="fa fa-check"></i><b>2.15.3</b> <code>boxplot</code></a></li>
<li class="chapter" data-level="2.15.4" data-path="r-basics.html"><a href="r-basics.html#image"><i class="fa fa-check"></i><b>2.15.4</b> <code>image</code></a></li>
</ul></li>
<li class="chapter" data-level="2.16" data-path="r-basics.html"><a href="r-basics.html#exercícios-6"><i class="fa fa-check"></i><b>2.16</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html"><i class="fa fa-check"></i><b>3</b> Conceitos básicos de programação</a>
<ul>
<li class="chapter" data-level="3.1" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#conditionals"><i class="fa fa-check"></i><b>3.1</b> Expressões condicionais</a></li>
<li class="chapter" data-level="3.2" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#como-definir-funções"><i class="fa fa-check"></i><b>3.2</b> Como definir funções</a></li>
<li class="chapter" data-level="3.3" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#namespaces"><i class="fa fa-check"></i><b>3.3</b> <em>Namespaces</em></a></li>
<li class="chapter" data-level="3.4" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#laços-do-tipo-for"><i class="fa fa-check"></i><b>3.4</b> Laços do tipo for</a></li>
<li class="chapter" data-level="3.5" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#vectorization"><i class="fa fa-check"></i><b>3.5</b> Vectorização e funcionais</a></li>
<li class="chapter" data-level="3.6" data-path="conceitos-básicos-de-programação.html"><a href="conceitos-básicos-de-programação.html#exercícios-7"><i class="fa fa-check"></i><b>3.6</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>4</b> <em>tidyverse</em></a>
<ul>
<li class="chapter" data-level="4.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy-data"><i class="fa fa-check"></i><b>4.1</b> Data <em>tidy</em></a></li>
<li class="chapter" data-level="4.2" data-path="tidyverse.html"><a href="tidyverse.html#exercícios-8"><i class="fa fa-check"></i><b>4.2</b> Exercícios</a></li>
<li class="chapter" data-level="4.3" data-path="tidyverse.html"><a href="tidyverse.html#como-manipular-data-frames"><i class="fa fa-check"></i><b>4.3</b> Como manipular <em>data frames</em></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="tidyverse.html"><a href="tidyverse.html#como-adicionar-uma-coluna-com-mutate"><i class="fa fa-check"></i><b>4.3.1</b> Como adicionar uma coluna com <code>mutate</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="tidyverse.html"><a href="tidyverse.html#como-criar-subconjuntos-com-filter"><i class="fa fa-check"></i><b>4.3.2</b> Como criar subconjuntos com <code>filter</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="tidyverse.html"><a href="tidyverse.html#como-selecionar-colunas-com-select"><i class="fa fa-check"></i><b>4.3.3</b> Como selecionar colunas com <code>select</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="tidyverse.html"><a href="tidyverse.html#exercícios-9"><i class="fa fa-check"></i><b>4.4</b> Exercícios</a></li>
<li class="chapter" data-level="4.5" data-path="tidyverse.html"><a href="tidyverse.html#o-cano_"><i class="fa fa-check"></i><b>4.5</b> O cano_: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.6" data-path="tidyverse.html"><a href="tidyverse.html#exercícios-10"><i class="fa fa-check"></i><b>4.6</b> Exercícios</a></li>
<li class="chapter" data-level="4.7" data-path="tidyverse.html"><a href="tidyverse.html#como-resumir-dados"><i class="fa fa-check"></i><b>4.7</b> Como resumir dados</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="tidyverse.html"><a href="tidyverse.html#summarize"><i class="fa fa-check"></i><b>4.7.1</b> <code>summarize</code></a></li>
<li class="chapter" data-level="4.7.2" data-path="tidyverse.html"><a href="tidyverse.html#pull"><i class="fa fa-check"></i><b>4.7.2</b> <code>pull</code></a></li>
<li class="chapter" data-level="4.7.3" data-path="tidyverse.html"><a href="tidyverse.html#group-by"><i class="fa fa-check"></i><b>4.7.3</b> Como agrupar e resumir com <code>group_by</code></a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="tidyverse.html"><a href="tidyverse.html#como-encomendar-os-data-frames"><i class="fa fa-check"></i><b>4.8</b> Como encomendar os <em>data frames</em></a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="tidyverse.html"><a href="tidyverse.html#como-encomendar-aninhado"><i class="fa fa-check"></i><b>4.8.1</b> Como encomendar aninhado</a></li>
<li class="chapter" data-level="4.8.2" data-path="tidyverse.html"><a href="tidyverse.html#os-primeiros-n"><i class="fa fa-check"></i><b>4.8.2</b> Os primeiros <span class="math inline">\(n\)</span></a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="tidyverse.html"><a href="tidyverse.html#exercícios-11"><i class="fa fa-check"></i><b>4.9</b> Exercícios</a></li>
<li class="chapter" data-level="4.10" data-path="tidyverse.html"><a href="tidyverse.html#tibbles"><i class="fa fa-check"></i><b>4.10</b> <em>Tibbles</em></a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="tidyverse.html"><a href="tidyverse.html#tibbles-parece-melhor"><i class="fa fa-check"></i><b>4.10.1</b> <em>Tibbles</em> parece melhor</a></li>
<li class="chapter" data-level="4.10.2" data-path="tidyverse.html"><a href="tidyverse.html#tibbles_subconjuntos-são_tibbles"><i class="fa fa-check"></i><b>4.10.2</b> <em>Tibbles_subconjuntos são_tibbles</em></a></li>
<li class="chapter" data-level="4.10.3" data-path="tidyverse.html"><a href="tidyverse.html#tibbles-pode-ter-entradas-complexas"><i class="fa fa-check"></i><b>4.10.3</b> <em>Tibbles</em> pode ter entradas complexas</a></li>
<li class="chapter" data-level="4.10.4" data-path="tidyverse.html"><a href="tidyverse.html#tibbles-podem-ser-agrupados"><i class="fa fa-check"></i><b>4.10.4</b> <em>Tibbles</em> podem ser agrupados</a></li>
<li class="chapter" data-level="4.10.5" data-path="tidyverse.html"><a href="tidyverse.html#como-criar-um-tibble-usando-tibble-ao-invés-de-data.frame"><i class="fa fa-check"></i><b>4.10.5</b> Como criar um <em>tibble</em> usando <code>tibble</code> ao invés de <code>data.frame</code></a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="tidyverse.html"><a href="tidyverse.html#o-operador-de-ponto"><i class="fa fa-check"></i><b>4.11</b> O operador de ponto</a></li>
<li class="chapter" data-level="4.12" data-path="tidyverse.html"><a href="tidyverse.html#do"><i class="fa fa-check"></i><b>4.12</b> <code>do</code></a></li>
<li class="chapter" data-level="4.13" data-path="tidyverse.html"><a href="tidyverse.html#o-pacote-purrr"><i class="fa fa-check"></i><b>4.13</b> O pacote <strong>purrr</strong></a></li>
<li class="chapter" data-level="4.14" data-path="tidyverse.html"><a href="tidyverse.html#os-condicionais-tidyverse"><i class="fa fa-check"></i><b>4.14</b> Os condicionais <em>tidyverse</em></a>
<ul>
<li class="chapter" data-level="4.14.1" data-path="tidyverse.html"><a href="tidyverse.html#case_when"><i class="fa fa-check"></i><b>4.14.1</b> <code>case_when</code></a></li>
<li class="chapter" data-level="4.14.2" data-path="tidyverse.html"><a href="tidyverse.html#between"><i class="fa fa-check"></i><b>4.14.2</b> <code>between</code></a></li>
</ul></li>
<li class="chapter" data-level="4.15" data-path="tidyverse.html"><a href="tidyverse.html#exercícios-12"><i class="fa fa-check"></i><b>4.15</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>5</b> Importando dados</a>
<ul>
<li class="chapter" data-level="5.1" data-path="importing-data.html"><a href="importing-data.html#caminhos-e-diretório-de-trabalho"><i class="fa fa-check"></i><b>5.1</b> Caminhos e diretório de trabalho</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="importing-data.html"><a href="importing-data.html#o-sistema-de-arquivos"><i class="fa fa-check"></i><b>5.1.1</b> O sistema de arquivos</a></li>
<li class="chapter" data-level="5.1.2" data-path="importing-data.html"><a href="importing-data.html#caminhos-relativos-e-completos"><i class="fa fa-check"></i><b>5.1.2</b> Caminhos relativos e completos</a></li>
<li class="chapter" data-level="5.1.3" data-path="importing-data.html"><a href="importing-data.html#o-diretório-de-trabalho"><i class="fa fa-check"></i><b>5.1.3</b> O diretório de trabalho</a></li>
<li class="chapter" data-level="5.1.4" data-path="importing-data.html"><a href="importing-data.html#como-gerar-nomes-de-caminhos"><i class="fa fa-check"></i><b>5.1.4</b> Como gerar nomes de caminhos</a></li>
<li class="chapter" data-level="5.1.5" data-path="importing-data.html"><a href="importing-data.html#como-copiar-arquivos-usando-caminhos"><i class="fa fa-check"></i><b>5.1.5</b> Como copiar arquivos usando caminhos</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="importing-data.html"><a href="importing-data.html#os-pacotes-readr-e-readxl"><i class="fa fa-check"></i><b>5.2</b> Os pacotes readr e readxl</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="importing-data.html"><a href="importing-data.html#readr"><i class="fa fa-check"></i><b>5.2.1</b> readr</a></li>
<li class="chapter" data-level="5.2.2" data-path="importing-data.html"><a href="importing-data.html#readxl"><i class="fa fa-check"></i><b>5.2.2</b> readxl</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="importing-data.html"><a href="importing-data.html#exercícios-13"><i class="fa fa-check"></i><b>5.3</b> Exercícios</a></li>
<li class="chapter" data-level="5.4" data-path="importing-data.html"><a href="importing-data.html#como-baixar-arquivos"><i class="fa fa-check"></i><b>5.4</b> Como baixar arquivos</a></li>
<li class="chapter" data-level="5.5" data-path="importing-data.html"><a href="importing-data.html#funções-básicas-de-importação-r"><i class="fa fa-check"></i><b>5.5</b> Funções básicas de importação R</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="importing-data.html"><a href="importing-data.html#scan"><i class="fa fa-check"></i><b>5.5.1</b> <code>scan</code></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="importing-data.html"><a href="importing-data.html#arquivos-de-texto-versus-arquivos-binários"><i class="fa fa-check"></i><b>5.6</b> Arquivos de texto versus arquivos binários</a></li>
<li class="chapter" data-level="5.7" data-path="importing-data.html"><a href="importing-data.html#unicode-versus-ascii"><i class="fa fa-check"></i><b>5.7</b> Unicode versus ASCII</a></li>
<li class="chapter" data-level="5.8" data-path="importing-data.html"><a href="importing-data.html#como-organizar-dados-com-planilhas"><i class="fa fa-check"></i><b>5.8</b> Como organizar dados com planilhas</a></li>
<li class="chapter" data-level="5.9" data-path="importing-data.html"><a href="importing-data.html#exercícios-14"><i class="fa fa-check"></i><b>5.9</b> Exercícios</a></li>
</ul></li>
<li class="part"><span><b>II Exibição de dados</b></span></li>
<li class="chapter" data-level="6" data-path="introdução-à-visualização-de-dados.html"><a href="introdução-à-visualização-de-dados.html"><i class="fa fa-check"></i><b>6</b> Introdução à visualização de dados</a></li>
<li class="chapter" data-level="7" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>7</b> ggplot2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ggplot2.html"><a href="ggplot2.html#os-componentes-de-um-gráfico"><i class="fa fa-check"></i><b>7.1</b> Os componentes de um gráfico</a></li>
<li class="chapter" data-level="7.2" data-path="ggplot2.html"><a href="ggplot2.html#objetos-ggplot"><i class="fa fa-check"></i><b>7.2</b> objetos <code>ggplot</code></a></li>
<li class="chapter" data-level="7.3" data-path="ggplot2.html"><a href="ggplot2.html#geometrias"><i class="fa fa-check"></i><b>7.3</b> Geometrias</a></li>
<li class="chapter" data-level="7.4" data-path="ggplot2.html"><a href="ggplot2.html#mapeamentos-estéticos"><i class="fa fa-check"></i><b>7.4</b> Mapeamentos estéticos</a></li>
<li class="chapter" data-level="7.5" data-path="ggplot2.html"><a href="ggplot2.html#camadas"><i class="fa fa-check"></i><b>7.5</b> Camadas</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="ggplot2.html"><a href="ggplot2.html#como-testar-vários-argumentos"><i class="fa fa-check"></i><b>7.5.1</b> Como testar vários argumentos</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="ggplot2.html"><a href="ggplot2.html#mapeamento-estético-global-versus-local"><i class="fa fa-check"></i><b>7.6</b> Mapeamento estético global versus local</a></li>
<li class="chapter" data-level="7.7" data-path="ggplot2.html"><a href="ggplot2.html#escalas"><i class="fa fa-check"></i><b>7.7</b> Escalas</a></li>
<li class="chapter" data-level="7.8" data-path="ggplot2.html"><a href="ggplot2.html#tags-e-títulos"><i class="fa fa-check"></i><b>7.8</b> Tags e títulos</a></li>
<li class="chapter" data-level="7.9" data-path="ggplot2.html"><a href="ggplot2.html#categorias-como-cores"><i class="fa fa-check"></i><b>7.9</b> Categorias como cores</a></li>
<li class="chapter" data-level="7.10" data-path="ggplot2.html"><a href="ggplot2.html#anotação-formas-e-ajustes"><i class="fa fa-check"></i><b>7.10</b> Anotação, formas e ajustes</a></li>
<li class="chapter" data-level="7.11" data-path="ggplot2.html"><a href="ggplot2.html#add-on-packages"><i class="fa fa-check"></i><b>7.11</b> Pacotes complementares</a></li>
<li class="chapter" data-level="7.12" data-path="ggplot2.html"><a href="ggplot2.html#como-combinar-tudo"><i class="fa fa-check"></i><b>7.12</b> Como combinar tudo</a></li>
<li class="chapter" data-level="7.13" data-path="ggplot2.html"><a href="ggplot2.html#qplot"><i class="fa fa-check"></i><b>7.13</b> Gráficos rápidos com <code>qplot</code></a></li>
<li class="chapter" data-level="7.14" data-path="ggplot2.html"><a href="ggplot2.html#grades-de-gráfico"><i class="fa fa-check"></i><b>7.14</b> Grades de gráfico</a></li>
<li class="chapter" data-level="7.15" data-path="ggplot2.html"><a href="ggplot2.html#exercícios-15"><i class="fa fa-check"></i><b>7.15</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>8</b> Como visualizar distribuições de dados</a>
<ul>
<li class="chapter" data-level="8.1" data-path="distributions.html"><a href="distributions.html#tipos-de-variáveis"><i class="fa fa-check"></i><b>8.1</b> Tipos de variáveis</a></li>
<li class="chapter" data-level="8.2" data-path="distributions.html"><a href="distributions.html#estudo-de-caso-descrevendo-a-altura-dos-alunos"><i class="fa fa-check"></i><b>8.2</b> Estudo de caso: descrevendo a altura dos alunos</a></li>
<li class="chapter" data-level="8.3" data-path="distributions.html"><a href="distributions.html#a-função-de-distribuição"><i class="fa fa-check"></i><b>8.3</b> A função de distribuição</a></li>
<li class="chapter" data-level="8.4" data-path="distributions.html"><a href="distributions.html#cdf-intro"><i class="fa fa-check"></i><b>8.4</b> Funções de distribuição cumulativa</a></li>
<li class="chapter" data-level="8.5" data-path="distributions.html"><a href="distributions.html#histogramas"><i class="fa fa-check"></i><b>8.5</b> Histogramas</a></li>
<li class="chapter" data-level="8.6" data-path="distributions.html"><a href="distributions.html#densidade-suave"><i class="fa fa-check"></i><b>8.6</b> Densidade suave</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="distributions.html"><a href="distributions.html#como-interpretar-o-eixo-y"><i class="fa fa-check"></i><b>8.6.1</b> Como interpretar o eixo y</a></li>
<li class="chapter" data-level="8.6.2" data-path="distributions.html"><a href="distributions.html#densidades-permitem-camadas"><i class="fa fa-check"></i><b>8.6.2</b> Densidades permitem camadas</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="distributions.html"><a href="distributions.html#exercícios-16"><i class="fa fa-check"></i><b>8.7</b> Exercícios</a></li>
<li class="chapter" data-level="8.8" data-path="distributions.html"><a href="distributions.html#normal-distribution"><i class="fa fa-check"></i><b>8.8</b> A distribuição normal</a></li>
<li class="chapter" data-level="8.9" data-path="distributions.html"><a href="distributions.html#unidades-padrão"><i class="fa fa-check"></i><b>8.9</b> Unidades padrão</a></li>
<li class="chapter" data-level="8.10" data-path="distributions.html"><a href="distributions.html#gráficos-qq"><i class="fa fa-check"></i><b>8.10</b> Gráficos QQ</a></li>
<li class="chapter" data-level="8.11" data-path="distributions.html"><a href="distributions.html#percentis"><i class="fa fa-check"></i><b>8.11</b> Percentis</a></li>
<li class="chapter" data-level="8.12" data-path="distributions.html"><a href="distributions.html#diagramas-de-caixas"><i class="fa fa-check"></i><b>8.12</b> Diagramas de caixas</a></li>
<li class="chapter" data-level="8.13" data-path="distributions.html"><a href="distributions.html#stratification"><i class="fa fa-check"></i><b>8.13</b> Estratificação</a></li>
<li class="chapter" data-level="8.14" data-path="distributions.html"><a href="distributions.html#student-height-cont"><i class="fa fa-check"></i><b>8.14</b> Estudo de caso: descrição das alturas dos alunos (continuação)</a></li>
<li class="chapter" data-level="8.15" data-path="distributions.html"><a href="distributions.html#exercícios-17"><i class="fa fa-check"></i><b>8.15</b> Exercícios</a></li>
<li class="chapter" data-level="8.16" data-path="distributions.html"><a href="distributions.html#other-geometries"><i class="fa fa-check"></i><b>8.16</b> Gegplot2 geometrias</a>
<ul>
<li class="chapter" data-level="8.16.1" data-path="distributions.html"><a href="distributions.html#gráficos-de-barra"><i class="fa fa-check"></i><b>8.16.1</b> Gráficos de barra</a></li>
<li class="chapter" data-level="8.16.2" data-path="distributions.html"><a href="distributions.html#histogramas-1"><i class="fa fa-check"></i><b>8.16.2</b> Histogramas</a></li>
<li class="chapter" data-level="8.16.3" data-path="distributions.html"><a href="distributions.html#gráficos-de-densidade"><i class="fa fa-check"></i><b>8.16.3</b> Gráficos de densidade</a></li>
<li class="chapter" data-level="8.16.4" data-path="distributions.html"><a href="distributions.html#diagramas-de-caixas-1"><i class="fa fa-check"></i><b>8.16.4</b> Diagramas de caixas</a></li>
<li class="chapter" data-level="8.16.5" data-path="distributions.html"><a href="distributions.html#gráficos-qq-1"><i class="fa fa-check"></i><b>8.16.5</b> Gráficos QQ</a></li>
<li class="chapter" data-level="8.16.6" data-path="distributions.html"><a href="distributions.html#imagens"><i class="fa fa-check"></i><b>8.16.6</b> Imagens</a></li>
<li class="chapter" data-level="8.16.7" data-path="distributions.html"><a href="distributions.html#gráficos-rápidos"><i class="fa fa-check"></i><b>8.16.7</b> Gráficos rápidos</a></li>
</ul></li>
<li class="chapter" data-level="8.17" data-path="distributions.html"><a href="distributions.html#exercícios-18"><i class="fa fa-check"></i><b>8.17</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="gapminder.html"><a href="gapminder.html"><i class="fa fa-check"></i><b>9</b> Visualização de dados na prática</a>
<ul>
<li class="chapter" data-level="9.1" data-path="gapminder.html"><a href="gapminder.html#estudo-de-caso-novas-idéias-sobre-pobreza"><i class="fa fa-check"></i><b>9.1</b> Estudo de caso: novas idéias sobre pobreza</a></li>
<li class="chapter" data-level="9.2" data-path="gapminder.html"><a href="gapminder.html#diagrama-de-dispersão"><i class="fa fa-check"></i><b>9.2</b> Diagrama de dispersão</a></li>
<li class="chapter" data-level="9.3" data-path="gapminder.html"><a href="gapminder.html#separe-em-facetas"><i class="fa fa-check"></i><b>9.3</b> Separe em facetas</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="gapminder.html"><a href="gapminder.html#facet_wrap"><i class="fa fa-check"></i><b>9.3.1</b> <code>facet_wrap</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="gapminder.html"><a href="gapminder.html#escalas-fixas-para-melhores-comparações"><i class="fa fa-check"></i><b>9.3.2</b> Escalas fixas para melhores comparações</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="gapminder.html"><a href="gapminder.html#gráficos-de-séries-temporais"><i class="fa fa-check"></i><b>9.4</b> Gráficos de séries temporais</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="gapminder.html"><a href="gapminder.html#etiquetas-em-vez-de-legendas"><i class="fa fa-check"></i><b>9.4.1</b> Etiquetas em vez de legendas</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="gapminder.html"><a href="gapminder.html#transformações-de-dados"><i class="fa fa-check"></i><b>9.5</b> Transformações de dados</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="gapminder.html"><a href="gapminder.html#transformação-logarítmica"><i class="fa fa-check"></i><b>9.5.1</b> Transformação logarítmica</a></li>
<li class="chapter" data-level="9.5.2" data-path="gapminder.html"><a href="gapminder.html#qual-base"><i class="fa fa-check"></i><b>9.5.2</b> Qual base?</a></li>
<li class="chapter" data-level="9.5.3" data-path="gapminder.html"><a href="gapminder.html#transformar-valores-ou-escala"><i class="fa fa-check"></i><b>9.5.3</b> Transformar valores ou escala?</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="gapminder.html"><a href="gapminder.html#como-visualizar-distribuições-multimodais"><i class="fa fa-check"></i><b>9.6</b> Como visualizar distribuições multimodais</a></li>
<li class="chapter" data-level="9.7" data-path="gapminder.html"><a href="gapminder.html#como-comparar-várias-distribuições-com-gráficos-de-caixas-e-gráficos-ridge"><i class="fa fa-check"></i><b>9.7</b> Como comparar várias distribuições com gráficos de caixas e gráficos <em>ridge</em></a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="gapminder.html"><a href="gapminder.html#diagrama-de-caixa"><i class="fa fa-check"></i><b>9.7.1</b> Diagrama de caixa</a></li>
<li class="chapter" data-level="9.7.2" data-path="gapminder.html"><a href="gapminder.html#exemplo-distribuições-de-renda-1970-versus-2010"><i class="fa fa-check"></i><b>9.7.2</b> Exemplo: distribuições de renda 1970 versus 2010</a></li>
<li class="chapter" data-level="9.7.3" data-path="gapminder.html"><a href="gapminder.html#como-acessar-variáveis-calculadas"><i class="fa fa-check"></i><b>9.7.3</b> Como acessar variáveis calculadas</a></li>
<li class="chapter" data-level="9.7.4" data-path="gapminder.html"><a href="gapminder.html#densidades-ponderadas"><i class="fa fa-check"></i><b>9.7.4</b> Densidades ponderadas</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="gapminder.html"><a href="gapminder.html#a-falácia-ecológica-e-a-importância-de-mostrar-os-dados"><i class="fa fa-check"></i><b>9.8</b> A falácia ecológica e a importância de mostrar os dados</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="gapminder.html"><a href="gapminder.html#logit"><i class="fa fa-check"></i><b>9.8.1</b> Transformação de logística</a></li>
<li class="chapter" data-level="9.8.2" data-path="gapminder.html"><a href="gapminder.html#mostrar-os-dados"><i class="fa fa-check"></i><b>9.8.2</b> Mostrar os dados</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html"><i class="fa fa-check"></i><b>10</b> Princípios de visualização de dados</a>
<ul>
<li class="chapter" data-level="10.1" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#como-codificar-dados-usando-pistas-visuais"><i class="fa fa-check"></i><b>10.1</b> Como codificar dados usando pistas visuais</a></li>
<li class="chapter" data-level="10.2" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#saiba-quando-incluir-0"><i class="fa fa-check"></i><b>10.2</b> Saiba quando incluir 0</a></li>
<li class="chapter" data-level="10.3" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#não-distorça-quantidades"><i class="fa fa-check"></i><b>10.3</b> Não distorça quantidades</a></li>
<li class="chapter" data-level="10.4" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#classificar-categorias-por-valor-significativo"><i class="fa fa-check"></i><b>10.4</b> Classificar categorias por valor significativo</a></li>
<li class="chapter" data-level="10.5" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#mostrar-os-dados-1"><i class="fa fa-check"></i><b>10.5</b> Mostrar os dados</a></li>
<li class="chapter" data-level="10.6" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#como-facilitar-comparações"><i class="fa fa-check"></i><b>10.6</b> Como facilitar comparações</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#use-eixos-comuns"><i class="fa fa-check"></i><b>10.6.1</b> Use eixos comuns</a></li>
<li class="chapter" data-level="10.6.2" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#alinhe-os-gráficos-verticalmente-para-ver-alterações-horizontais-e-horizontalmente-para-ver-alterações-verticais"><i class="fa fa-check"></i><b>10.6.2</b> Alinhe os gráficos verticalmente para ver alterações horizontais e horizontalmente para ver alterações verticais</a></li>
<li class="chapter" data-level="10.6.3" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#considere-transformações"><i class="fa fa-check"></i><b>10.6.3</b> Considere transformações</a></li>
<li class="chapter" data-level="10.6.4" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#as-indicações-visuais-comparadas-devem-ser-adjacentes"><i class="fa fa-check"></i><b>10.6.4</b> As indicações visuais comparadas devem ser adjacentes</a></li>
<li class="chapter" data-level="10.6.5" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#use-cores"><i class="fa fa-check"></i><b>10.6.5</b> Use cores</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#pense-no-daltônico"><i class="fa fa-check"></i><b>10.7</b> Pense no daltônico</a></li>
<li class="chapter" data-level="10.8" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#gráficos-para-duas-variáveis"><i class="fa fa-check"></i><b>10.8</b> Gráficos para duas variáveis</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#gráficos-de-inclinação"><i class="fa fa-check"></i><b>10.8.1</b> Gráficos de inclinação</a></li>
<li class="chapter" data-level="10.8.2" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#gráfico-de-bland-altman"><i class="fa fa-check"></i><b>10.8.2</b> Gráfico de Bland-Altman</a></li>
</ul></li>
<li class="chapter" data-level="10.9" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#como-codificar-uma-terceira-variável"><i class="fa fa-check"></i><b>10.9</b> Como codificar uma terceira variável</a></li>
<li class="chapter" data-level="10.10" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#evitar-gráficos-pseudo-tridimensionais"><i class="fa fa-check"></i><b>10.10</b> Evitar gráficos pseudo-tridimensionais</a></li>
<li class="chapter" data-level="10.11" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#evite-muitos-dígitos-significativos"><i class="fa fa-check"></i><b>10.11</b> Evite muitos dígitos significativos</a></li>
<li class="chapter" data-level="10.12" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#conheça-o-seu-público"><i class="fa fa-check"></i><b>10.12</b> Conheça o seu público</a></li>
<li class="chapter" data-level="10.13" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#exercícios-19"><i class="fa fa-check"></i><b>10.13</b> Exercícios</a></li>
<li class="chapter" data-level="10.14" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#vaccines"><i class="fa fa-check"></i><b>10.14</b> Estudo de caso: vacinas e doenças infecciosas</a></li>
<li class="chapter" data-level="10.15" data-path="princípios-de-visualização-de-dados.html"><a href="princípios-de-visualização-de-dados.html#exercícios-20"><i class="fa fa-check"></i><b>10.15</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="robust-summaries.html"><a href="robust-summaries.html"><i class="fa fa-check"></i><b>11</b> Resumos robustos</a>
<ul>
<li class="chapter" data-level="11.1" data-path="robust-summaries.html"><a href="robust-summaries.html#valores-atípicos"><i class="fa fa-check"></i><b>11.1</b> Valores atípicos</a></li>
<li class="chapter" data-level="11.2" data-path="robust-summaries.html"><a href="robust-summaries.html#mediana"><i class="fa fa-check"></i><b>11.2</b> Mediana</a></li>
<li class="chapter" data-level="11.3" data-path="robust-summaries.html"><a href="robust-summaries.html#o-intervalo-interquartil-iqr"><i class="fa fa-check"></i><b>11.3</b> O intervalo interquartil (IQR)</a></li>
<li class="chapter" data-level="11.4" data-path="robust-summaries.html"><a href="robust-summaries.html#definição-de-tukey-de-um-outlier"><i class="fa fa-check"></i><b>11.4</b> Definição de Tukey de um outlier</a></li>
<li class="chapter" data-level="11.5" data-path="robust-summaries.html"><a href="robust-summaries.html#desvio-absoluto-mediano"><i class="fa fa-check"></i><b>11.5</b> Desvio absoluto mediano</a></li>
<li class="chapter" data-level="11.6" data-path="robust-summaries.html"><a href="robust-summaries.html#exercícios-21"><i class="fa fa-check"></i><b>11.6</b> Exercícios</a></li>
<li class="chapter" data-level="11.7" data-path="robust-summaries.html"><a href="robust-summaries.html#estudo-de-caso-altura-do-aluno-autorreferida"><i class="fa fa-check"></i><b>11.7</b> Estudo de caso: altura do aluno autorreferida</a></li>
</ul></li>
<li class="part"><span><b>III Estatísticas com R</b></span></li>
<li class="chapter" data-level="12" data-path="introdução-às-estatísticas-com-r.html"><a href="introdução-às-estatísticas-com-r.html"><i class="fa fa-check"></i><b>12</b> Introdução às estatísticas com R</a></li>
<li class="chapter" data-level="13" data-path="probabilidade.html"><a href="probabilidade.html"><i class="fa fa-check"></i><b>13</b> Probabilidade</a>
<ul>
<li class="chapter" data-level="13.1" data-path="probabilidade.html"><a href="probabilidade.html#probabilidade-discreta"><i class="fa fa-check"></i><b>13.1</b> Probabilidade discreta</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="probabilidade.html"><a href="probabilidade.html#frequência-relativa"><i class="fa fa-check"></i><b>13.1.1</b> Frequência relativa</a></li>
<li class="chapter" data-level="13.1.2" data-path="probabilidade.html"><a href="probabilidade.html#notação"><i class="fa fa-check"></i><b>13.1.2</b> Notação</a></li>
<li class="chapter" data-level="13.1.3" data-path="probabilidade.html"><a href="probabilidade.html#distribuições-de-probabilidade"><i class="fa fa-check"></i><b>13.1.3</b> Distribuições de probabilidade</a></li>
<li class="chapter" data-level="13.1.4" data-path="probabilidade.html"><a href="probabilidade.html#defina-a-semente-aleatória"><i class="fa fa-check"></i><b>13.1.4</b> Defina a semente aleatória</a></li>
<li class="chapter" data-level="13.1.5" data-path="probabilidade.html"><a href="probabilidade.html#com-e-sem-substituição"><i class="fa fa-check"></i><b>13.1.5</b> Com e sem substituição</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="probabilidade.html"><a href="probabilidade.html#independência"><i class="fa fa-check"></i><b>13.2</b> Independência</a></li>
<li class="chapter" data-level="13.3" data-path="probabilidade.html"><a href="probabilidade.html#probabilidades-condicionais"><i class="fa fa-check"></i><b>13.3</b> Probabilidades condicionais</a></li>
<li class="chapter" data-level="13.4" data-path="probabilidade.html"><a href="probabilidade.html#regras-de-adição-e-multiplicação"><i class="fa fa-check"></i><b>13.4</b> Regras de adição e multiplicação</a></li>
<li class="chapter" data-level="13.5" data-path="probabilidade.html"><a href="probabilidade.html#combinações-e-permutações"><i class="fa fa-check"></i><b>13.5</b> Combinações e permutações</a></li>
<li class="chapter" data-level="13.6" data-path="probabilidade.html"><a href="probabilidade.html#exemplos"><i class="fa fa-check"></i><b>13.6</b> Exemplos</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="probabilidade.html"><a href="probabilidade.html#problema-de-aniversário"><i class="fa fa-check"></i><b>13.6.1</b> Problema de aniversário</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="probabilidade.html"><a href="probabilidade.html#exercícios-22"><i class="fa fa-check"></i><b>13.7</b> Exercícios</a></li>
<li class="chapter" data-level="13.8" data-path="probabilidade.html"><a href="probabilidade.html#probabilidade-contínua"><i class="fa fa-check"></i><b>13.8</b> Probabilidade contínua</a></li>
<li class="chapter" data-level="13.9" data-path="probabilidade.html"><a href="probabilidade.html#distribuições-teóricas-contínuas"><i class="fa fa-check"></i><b>13.9</b> Distribuições teóricas contínuas</a>
<ul>
<li class="chapter" data-level="13.9.1" data-path="probabilidade.html"><a href="probabilidade.html#distribuições-teóricas-como-aproximações"><i class="fa fa-check"></i><b>13.9.1</b> Distribuições teóricas como aproximações</a></li>
<li class="chapter" data-level="13.9.2" data-path="probabilidade.html"><a href="probabilidade.html#a-densidade-de-probabilidade"><i class="fa fa-check"></i><b>13.9.2</b> A densidade de probabilidade</a></li>
</ul></li>
<li class="chapter" data-level="13.10" data-path="probabilidade.html"><a href="probabilidade.html#distribuições-contínuas"><i class="fa fa-check"></i><b>13.10</b> Distribuições contínuas</a></li>
<li class="chapter" data-level="13.11" data-path="probabilidade.html"><a href="probabilidade.html#exercícios-23"><i class="fa fa-check"></i><b>13.11</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html"><i class="fa fa-check"></i><b>14</b> Variáveis aleatórias</a>
<ul>
<li class="chapter" data-level="14.1" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#variáveis-aleatórias-1"><i class="fa fa-check"></i><b>14.1</b> Variáveis aleatórias</a></li>
<li class="chapter" data-level="14.2" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#modelos-de-amostragem"><i class="fa fa-check"></i><b>14.2</b> Modelos de amostragem</a></li>
<li class="chapter" data-level="14.3" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#a-distribuição-de-probabilidade-de-uma-variável-aleatória"><i class="fa fa-check"></i><b>14.3</b> A distribuição de probabilidade de uma variável aleatória</a></li>
<li class="chapter" data-level="14.4" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#distribuições-versus-distribuições-de-probabilidade"><i class="fa fa-check"></i><b>14.4</b> Distribuições versus distribuições de probabilidade</a></li>
<li class="chapter" data-level="14.5" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#o-valor-esperado-e-o-erro-padrão"><i class="fa fa-check"></i><b>14.5</b> O valor esperado e o erro padrão</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#população-sd-versus-amostra-sd"><i class="fa fa-check"></i><b>14.5.1</b> População SD versus amostra SD</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#teorema-do-limite-central"><i class="fa fa-check"></i><b>14.6</b> Teorema do limite central</a></li>
<li class="chapter" data-level="14.7" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#propriedades-estatísticas-das-médias"><i class="fa fa-check"></i><b>14.7</b> Propriedades estatísticas das médias</a></li>
<li class="chapter" data-level="14.8" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#lei-dos-grandes-números"><i class="fa fa-check"></i><b>14.8</b> Lei dos grandes números</a>
<ul>
<li class="chapter" data-level="14.8.1" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#interpretação-incorreta-da-lei-das-médias"><i class="fa fa-check"></i><b>14.8.1</b> Interpretação incorreta da lei das médias</a></li>
</ul></li>
<li class="chapter" data-level="14.9" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#exercícios-24"><i class="fa fa-check"></i><b>14.9</b> Exercícios</a></li>
<li class="chapter" data-level="14.10" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#estudo-de-caso-o-grande-short"><i class="fa fa-check"></i><b>14.10</b> Estudo de caso: o grande short</a>
<ul>
<li class="chapter" data-level="14.10.1" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#taxas-de-juros-explicadas-com-um-modelo-de-oportunidade"><i class="fa fa-check"></i><b>14.10.1</b> Taxas de juros explicadas com um modelo de oportunidade</a></li>
<li class="chapter" data-level="14.10.2" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#o-grande-curto"><i class="fa fa-check"></i><b>14.10.2</b> O Grande Curto</a></li>
</ul></li>
<li class="chapter" data-level="14.11" data-path="variáveis-aleatórias.html"><a href="variáveis-aleatórias.html#exercícios-25"><i class="fa fa-check"></i><b>14.11</b> Exercícios</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado com bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introdução à Ciência de Dados</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="gapminder" class="section level1" number="9">
<h1><span class="header-section-number">Capítulo 9</span> Visualização de dados na prática</h1>
<p>Neste capítulo, demonstraremos como o código <strong>ggplot2</strong> relativamente simples pode criar gráficos esclarecedores e esteticamente agradáveis. Como motivação, criaremos gráficos que nos ajudarão a entender melhor as tendências da saúde e da economia global. Vamos implementar o que aprendemos nos capítulos <a href="ggplot2.html#ggplot2">7</a> e <a href="distributions.html#other-geometries">8.16</a> e aprenderemos a expandir o código para aperfeiçoar os gráficos. À medida que prosseguimos em nosso estudo de caso, descreveremos os princípios gerais mais relevantes para a visualização de dados e aprenderemos conceitos como <em>facetes</em>, <em>gráficos de séries temporais</em>, <em>formações_de_formações_e</em> gráficos de crista_.</p>
<div id="estudo-de-caso-novas-idéias-sobre-pobreza" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Estudo de caso: novas idéias sobre pobreza</h2>
<p>Hans Rosling<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a> foi o co-fundador da Fundação Gapminder<a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a>, uma organização dedicada a educar o público através de dados para dissipar mitos comuns sobre o chamado mundo em desenvolvimento. A organização usa dados para mostrar como as tendências atuais nos campos da saúde e da economia contradizem as narrativas emanadas da cobertura sensacional da mídia de catástrofes, tragédias e outros eventos infelizes. Conforme declarado no site da Fundação Gapminder:</p>
<blockquote>
<blockquote>
<blockquote>
<p>Jornalistas e lobistas contam histórias dramáticas. Esse é o trabalho deles. Eles contam histórias sobre eventos extraordinários e pessoas incomuns. Histórias dramáticas se acumulam na mente das pessoas em visões de mundo excessivamente dramáticas e fortes sentimentos de estresse negativo: “O mundo está piorando!”, “Somos nós contra eles!”, “Outras pessoas estão Estranho!”," A população continua crescendo! “E” Ninguém liga! "</p>
</blockquote>
</blockquote>
</blockquote>
<p>Hans Rosling decidiu, de maneira dramática, educar o público sobre tendências orientadas a dados usando visualizações de dados eficazes. Esta seção é baseada em duas palestras que exemplificam essa perspectiva educacional: <em>Novas perspectivas sobre a pobreza</em><a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a> e <em>As melhores estatísticas que você já viu</em><a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a>. Especificamente, nesta seção, usamos dados para tentar responder às duas perguntas a seguir:</p>
<ol style="list-style-type: decimal">
<li>É uma caracterização justa do mundo de hoje dizer que está dividido em nações ocidentais ricas e no mundo em desenvolvimento formado pela África, Ásia e América Latina?</li>
<li>A desigualdade de renda piorou em todos os países nos últimos 40 anos?</li>
</ol>
<p>Para responder a essas perguntas, usaremos o conjunto de dados <code>gapminder</code> fornecido por <strong>dslabs</strong>. Esse conjunto de dados foi criado usando várias planilhas disponíveis da Fundação Gapminder. Eles podem acessar a tabela desta maneira:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="gapminder.html#cb349-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb349-2"><a href="gapminder.html#cb349-2"></a><span class="kw">library</span>(dslabs)</span>
<span id="cb349-3"><a href="gapminder.html#cb349-3"></a><span class="kw">data</span>(gapminder)</span>
<span id="cb349-4"><a href="gapminder.html#cb349-4"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as_tibble</span>()</span>
<span id="cb349-5"><a href="gapminder.html#cb349-5"></a><span class="co">#&gt; # A tibble: 10,545 x 9</span></span>
<span id="cb349-6"><a href="gapminder.html#cb349-6"></a><span class="co">#&gt;   country  year infant_mortality life_expectancy fertility population</span></span>
<span id="cb349-7"><a href="gapminder.html#cb349-7"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;int&gt;            &lt;dbl&gt;           &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span id="cb349-8"><a href="gapminder.html#cb349-8"></a><span class="co">#&gt; 1 Albania  1960            115.             62.9      6.19    1636054</span></span>
<span id="cb349-9"><a href="gapminder.html#cb349-9"></a><span class="co">#&gt; 2 Algeria  1960            148.             47.5      7.65   11124892</span></span>
<span id="cb349-10"><a href="gapminder.html#cb349-10"></a><span class="co">#&gt; 3 Angola   1960            208              36.0      7.32    5270844</span></span>
<span id="cb349-11"><a href="gapminder.html#cb349-11"></a><span class="co">#&gt; 4 Antigu…  1960             NA              63.0      4.43      54681</span></span>
<span id="cb349-12"><a href="gapminder.html#cb349-12"></a><span class="co">#&gt; 5 Argent…  1960             59.9            65.4      3.11   20619075</span></span>
<span id="cb349-13"><a href="gapminder.html#cb349-13"></a><span class="co">#&gt; # … with 10,540 more rows, and 3 more variables: gdp &lt;dbl&gt;,</span></span>
<span id="cb349-14"><a href="gapminder.html#cb349-14"></a><span class="co">#&gt; #   continent &lt;fct&gt;, region &lt;fct&gt;</span></span></code></pre></div>
<p>Teste de Hans Rosling</p>
<p>Como no vídeo <em>New Insights on Poverty</em>, começamos testando nosso conhecimento das diferenças na mortalidade infantil em diferentes países. Para cada um dos cinco pares de países abaixo, quais países você acha que tiveram as maiores taxas de mortalidade infantil em 2015? Quais pares você acha que são mais parecidos?</p>
<ol style="list-style-type: decimal">
<li>Sri Lanka ou Turquia</li>
<li>Polônia ou Coréia do Sul</li>
<li>Malásia ou Rússia</li>
<li>Paquistão ou Vietnã</li>
<li>Tailândia ou África do Sul</li>
</ol>
<p>Ao responder a essas perguntas sem dados, os países não europeus geralmente são escolhidos como os que apresentam as mais altas taxas de mortalidade infantil: Sri Lanka sobre a Turquia, Coréia do Sul sobre Polônia e Malásia sobre Rússia. Também é comum supor que os países considerados parte do mundo em desenvolvimento - Paquistão, Vietnã, Tailândia e África do Sul - têm taxas de mortalidade igualmente altas.</p>
<p>Para responder a essas perguntas <strong>com dados</strong>, podemos usar <strong>dplyr</strong>. Por exemplo, para a primeira comparação, vemos que:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="gapminder.html#cb350-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb350-2"><a href="gapminder.html#cb350-2"></a><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2015</span> <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Sri Lanka&quot;</span>,<span class="st">&quot;Turkey&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb350-3"><a href="gapminder.html#cb350-3"></a><span class="kw">select</span>(country, infant_mortality)</span>
<span id="cb350-4"><a href="gapminder.html#cb350-4"></a><span class="co">#&gt;     country infant_mortality</span></span>
<span id="cb350-5"><a href="gapminder.html#cb350-5"></a><span class="co">#&gt; 1 Sri Lanka              8.4</span></span>
<span id="cb350-6"><a href="gapminder.html#cb350-6"></a><span class="co">#&gt; 2    Turkey             11.6</span></span></code></pre></div>
<p>A Turquia tem a maior taxa de mortalidade infantil.</p>
<p>Podemos usar esse código em todas as comparações e descobrir o seguinte:</p>
<pre><code>#&gt; New names:
#&gt; * country -&gt; country...1
#&gt; * infant_mortality -&gt; infant_mortality...2
#&gt; * country -&gt; country...3
#&gt; * infant_mortality -&gt; infant_mortality...4</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
infant mortality
</th>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
infant mortality
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Sri Lanka
</td>
<td style="text-align:right;">
8.4
</td>
<td style="text-align:left;">
Turkey
</td>
<td style="text-align:right;">
11.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Poland
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:left;">
South Korea
</td>
<td style="text-align:right;">
2.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Malaysia
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:left;">
Russia
</td>
<td style="text-align:right;">
8.2
</td>
</tr>
<tr>
<td style="text-align:left;">
Pakistan
</td>
<td style="text-align:right;">
65.8
</td>
<td style="text-align:left;">
Vietnam
</td>
<td style="text-align:right;">
17.3
</td>
</tr>
<tr>
<td style="text-align:left;">
Thailand
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:left;">
South Africa
</td>
<td style="text-align:right;">
33.6
</td>
</tr>
</tbody>
</table>
</div>
<div id="diagrama-de-dispersão" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Diagrama de dispersão</h2>
<p>A razão para as pontuações baixas decorre da noção preconcebida de que o mundo está dividido em dois grupos: o mundo ocidental (Europa Ocidental e América do Norte), caracterizado por vida longa e famílias pequenas, versus o mundo em desenvolvimento (África). , Ásia e América Latina), caracterizada por curtos períodos de vida e famílias numerosas. Mas os dados suportam essa visão dicotômica?</p>
<p>Os dados necessários para responder a esta pergunta também estão disponíveis em nossa tabela. <code>gapminder</code>. Usando nossas habilidades de visualização de dados recém-aprendidas, podemos enfrentar esse desafio.</p>
<p>Para analisar essa visão de mundo, nosso primeiro gráfico é um gráfico de dispersão da expectativa de vida versus taxas de fertilidade (número médio de filhos por mulher). Começamos analisando os dados de cerca de 50 anos atrás, quando talvez essa visão tenha sido consolidada em nossas mentes.</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="gapminder.html#cb352-1"></a><span class="kw">filter</span>(gapminder, year <span class="op">==</span><span class="st"> </span><span class="dv">1962</span>) <span class="op">%&gt;%</span></span>
<span id="cb352-2"><a href="gapminder.html#cb352-2"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(fertility, life_expectancy)) <span class="op">+</span></span>
<span id="cb352-3"><a href="gapminder.html#cb352-3"></a><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="livro_files/figure-html/fertility-versus-life-expectancy-1962-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>A maioria dos pontos é dividida em duas categorias diferentes:</p>
<ol style="list-style-type: decimal">
<li>Expectativa de vida em torno de 70 anos e 3 ou menos filhos por família.</li>
<li>Expectativa de vida de menos de 65 anos e mais de 5 filhos por família.</li>
</ol>
<p>Para confirmar que esses países são das regiões que esperamos, podemos usar uma cor para representar um continente.</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="gapminder.html#cb353-1"></a><span class="kw">filter</span>(gapminder, year <span class="op">==</span><span class="st"> </span><span class="dv">1962</span>) <span class="op">%&gt;%</span></span>
<span id="cb353-2"><a href="gapminder.html#cb353-2"></a><span class="kw">ggplot</span>( <span class="kw">aes</span>(fertility, life_expectancy, <span class="dt">color =</span> continent)) <span class="op">+</span></span>
<span id="cb353-3"><a href="gapminder.html#cb353-3"></a><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="livro_files/figure-html/fertility-versus-life-expectancy-1962-with-color-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Em 1962, a visão do “Ocidente versus o mundo em desenvolvimento” era baseada em uma certa realidade. Ainda é assim 50 anos depois?</p>
</div>
<div id="separe-em-facetas" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Separe em facetas</h2>
<p>Podemos facilmente representar graficamente os dados de 2012 da mesma maneira que fizemos em 1962. No entanto, para comparação, é preferível representar graficamente lado a lado. No <strong>ggplot2</strong>, conseguimos isso separando as variáveis em <em>facets</em>: estratificamos os dados por alguma variável e fazemos o mesmo gráfico para cada estrato.</p>
<p>Para separar em facetas, adicionamos uma camada com a função <code>facet_grid</code>, que separa automaticamente os gráficos. Essa função permite separar até duas variáveis em facetas usando colunas para representar uma variável e linhas para representar a outra. A função espera que as variáveis de linha e coluna sejam separadas por um <code>~</code>. Aqui vemos um exemplo de um diagrama de dispersão em que adicionamos <code>facet_grid</code> como a última camada:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="gapminder.html#cb354-1"></a><span class="kw">filter</span>(gapminder, year<span class="op">%in%</span><span class="kw">c</span>(<span class="dv">1962</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span></span>
<span id="cb354-2"><a href="gapminder.html#cb354-2"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(fertility, life_expectancy, <span class="dt">col =</span> continent)) <span class="op">+</span></span>
<span id="cb354-3"><a href="gapminder.html#cb354-3"></a><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb354-4"><a href="gapminder.html#cb354-4"></a><span class="kw">facet_grid</span>(continent<span class="op">~</span>year)</span></code></pre></div>
<p><img src="livro_files/figure-html/fertility-versus-life-expectancy-facet-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Acima, vemos um gráfico para cada combinação de continente/ ano. No entanto, este é apenas um exemplo e mais do que queremos, que é simplesmente comparar dois anos: 1962 e 2012. Nesse caso, existe apenas uma variável e usamos <code>.</code> para que <code>facet_grid</code> saiba que não estamos usando uma das variáveis:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="gapminder.html#cb355-1"></a><span class="kw">filter</span>(gapminder, year<span class="op">%in%</span><span class="kw">c</span>(<span class="dv">1962</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span></span>
<span id="cb355-2"><a href="gapminder.html#cb355-2"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(fertility, life_expectancy, <span class="dt">col =</span> continent)) <span class="op">+</span></span>
<span id="cb355-3"><a href="gapminder.html#cb355-3"></a><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb355-4"><a href="gapminder.html#cb355-4"></a><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>year)</span></code></pre></div>
<p><img src="livro_files/figure-html/fertility-versus-life-expectancy-two-years-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Este gráfico mostra claramente que a maioria dos países mudou do conjunto <em>desenvolvido_mundo para o_estilo ocidental</em>. Em 2012, a visão do mundo ocidental versus o mundo em desenvolvimento não faz mais sentido. Isso é particularmente evidente ao comparar a Europa com a Ásia, este último agora com vários países que fizeram grandes melhorias.</p>
<div id="facet_wrap" class="section level3" number="9.3.1">
<h3><span class="header-section-number">9.3.1</span> <code>facet_wrap</code></h3>
<p>Para explorar como essa transformação ocorreu ao longo dos anos, podemos fazer o gráfico por vários anos. Por exemplo, podemos adicionar os anos 1970, 1980, 1990 e 2000. No entanto, se fizermos isso, não queremos todos os gráficos na mesma linha, que é o que faz <code>facet_grid</code> por padrão, pois eles parecerão muito estreitos para exibir os dados. Em vez disso, queremos usar várias linhas e colunas. A função <code>facet_wrap</code> nos permite fazer isso automaticamente, acomodando a série de gráficos para que cada imagem tenha dimensões visíveis:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="gapminder.html#cb356-1"></a>years &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1962</span>, <span class="dv">1980</span>, <span class="dv">1990</span>, <span class="dv">2000</span>, <span class="dv">2012</span>)</span>
<span id="cb356-2"><a href="gapminder.html#cb356-2"></a>continents &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Europe&quot;</span>, <span class="st">&quot;Asia&quot;</span>)</span>
<span id="cb356-3"><a href="gapminder.html#cb356-3"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb356-4"><a href="gapminder.html#cb356-4"></a><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>years <span class="op">&amp;</span><span class="st"> </span>continent <span class="op">%in%</span><span class="st"> </span>continents) <span class="op">%&gt;%</span></span>
<span id="cb356-5"><a href="gapminder.html#cb356-5"></a><span class="kw">ggplot</span>( <span class="kw">aes</span>(fertility, life_expectancy, <span class="dt">col =</span> continent)) <span class="op">+</span></span>
<span id="cb356-6"><a href="gapminder.html#cb356-6"></a><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb356-7"><a href="gapminder.html#cb356-7"></a><span class="kw">facet_wrap</span>(<span class="op">~</span>year)</span></code></pre></div>
<p><img src="livro_files/figure-html/fertility-versus-life-expectancy-five-years-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Este gráfico mostra claramente como a maioria dos países asiáticos melhorou a uma taxa muito mais rápida que a Europa.</p>
</div>
<div id="escalas-fixas-para-melhores-comparações" class="section level3" number="9.3.2">
<h3><span class="header-section-number">9.3.2</span> Escalas fixas para melhores comparações</h3>
<p>A escolha padrão da faixa de eixos é importante. Quando não estiver em uso <code>facet</code> esse intervalo é determinado pelos dados mostrados no gráfico. Quando eles usam <code>facet</code> esse intervalo é determinado pelos dados exibidos em todos os gráficos e, portanto, permanece fixo em todos os gráficos. Isso facilita muito as comparações entre gráficos. Por exemplo, no gráfico acima, podemos ver que a expectativa de vida aumentou e a fertilidade diminuiu na maioria dos países. Vemos isso porque a nuvem de pontos está se movendo. Este não é o caso se ajustarmos as escalas:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="gapminder.html#cb357-1"></a><span class="kw">filter</span>(gapminder, year<span class="op">%in%</span><span class="kw">c</span>(<span class="dv">1962</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span></span>
<span id="cb357-2"><a href="gapminder.html#cb357-2"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(fertility, life_expectancy, <span class="dt">col =</span> continent)) <span class="op">+</span></span>
<span id="cb357-3"><a href="gapminder.html#cb357-3"></a><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb357-4"><a href="gapminder.html#cb357-4"></a><span class="kw">facet_wrap</span>(. <span class="op">~</span><span class="st"> </span>year, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/facet-without-fixed-scales-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>No gráfico acima, devemos prestar atenção especial ao intervalo, para observar que o gráfico à direita tem uma expectativa de vida mais longa.</p>
</div>
</div>
<div id="gráficos-de-séries-temporais" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> Gráficos de séries temporais</h2>
<p>As visualizações acima ilustram efetivamente que os dados não são mais consistentes com a visão de mundo ocidental versus o mundo em desenvolvimento. Vendo esses gráficos, novas questões surgem. Por exemplo, quais países estão melhorando mais e quais são os menos? A melhoria foi constante nos últimos 50 anos ou acelerou mais em determinados períodos? Para uma análise mais detalhada que possa ajudar a responder a essas perguntas, apresentamos gráficos de séries temporais.</p>
<p>Os gráficos de séries temporais possuem tempo no eixo x e um resultado ou medida de interesse no eixo y. Por exemplo, aqui está um gráfico da tendência nas taxas de fertilidade nos Estados Unidos:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="gapminder.html#cb358-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb358-2"><a href="gapminder.html#cb358-2"></a><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;United States&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb358-3"><a href="gapminder.html#cb358-3"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, fertility)) <span class="op">+</span></span>
<span id="cb358-4"><a href="gapminder.html#cb358-4"></a><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="livro_files/figure-html/fertility-time-series-plot-points-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Observamos que a tendência não é linear, mas que durante os anos sessenta e setenta há uma queda acentuada abaixo de 2. Em seguida, a tendência retorna a 2 e se estabiliza nos anos noventa.</p>
<p>Quando os pontos são espaçados regularmente e densamente, como vemos acima, criamos uma curva que conecta os pontos às linhas, para transmitir que esses dados são provenientes de uma única série, aqui um país. Para fazer isso, usamos a função <code>geom_line</code> em vez de <code>geom_point</code>.</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="gapminder.html#cb359-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb359-2"><a href="gapminder.html#cb359-2"></a><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;United States&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb359-3"><a href="gapminder.html#cb359-3"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, fertility)) <span class="op">+</span></span>
<span id="cb359-4"><a href="gapminder.html#cb359-4"></a><span class="kw">geom_line</span>()</span></code></pre></div>
<p><img src="livro_files/figure-html/fertility-time-series-plot-curve-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Isso é particularmente útil ao comparar dois países. Se criarmos um subconjunto dos dados para incluir dois países, um da Europa e outro da Ásia, adaptaremos o código acima:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="gapminder.html#cb360-1"></a>countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;South Korea&quot;</span>,<span class="st">&quot;Germany&quot;</span>)</span>
<span id="cb360-2"><a href="gapminder.html#cb360-2"></a></span>
<span id="cb360-3"><a href="gapminder.html#cb360-3"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries) <span class="op">%&gt;%</span></span>
<span id="cb360-4"><a href="gapminder.html#cb360-4"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(year,fertility)) <span class="op">+</span></span>
<span id="cb360-5"><a href="gapminder.html#cb360-5"></a><span class="kw">geom_line</span>()</span></code></pre></div>
<p><img src="livro_files/figure-html/wrong-time-series-plot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Claramente, esse <strong>not</strong> é o gráfico que queremos. Em vez de uma linha para cada país, os pontos dos dois países são unidos porque não informamos <code>ggplot</code> que queremos duas linhas independentes. Para que <code>ggplot</code> para entender que existem duas curvas que devem ser feitas separadamente, atribuímos cada ponto a uma <code>group</code>, um para cada país:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="gapminder.html#cb361-1"></a>countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;South Korea&quot;</span>,<span class="st">&quot;Germany&quot;</span>)</span>
<span id="cb361-2"><a href="gapminder.html#cb361-2"></a></span>
<span id="cb361-3"><a href="gapminder.html#cb361-3"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(fertility)) <span class="op">%&gt;%</span></span>
<span id="cb361-4"><a href="gapminder.html#cb361-4"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, fertility, <span class="dt">group =</span> country)) <span class="op">+</span></span>
<span id="cb361-5"><a href="gapminder.html#cb361-5"></a><span class="kw">geom_line</span>()</span></code></pre></div>
<p><img src="livro_files/figure-html/time-series-two-curves-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Mas qual linha vai com qual país? Podemos atribuir cores para fazer essa distinção.
Um efeito colateral útil do uso do argumento <code>color</code> para atribuir cores diferentes a diferentes países, os dados são agrupados automaticamente:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="gapminder.html#cb362-1"></a>countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;South Korea&quot;</span>,<span class="st">&quot;Germany&quot;</span>)</span>
<span id="cb362-2"><a href="gapminder.html#cb362-2"></a></span>
<span id="cb362-3"><a href="gapminder.html#cb362-3"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(fertility)) <span class="op">%&gt;%</span></span>
<span id="cb362-4"><a href="gapminder.html#cb362-4"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(year,fertility, <span class="dt">col =</span> country)) <span class="op">+</span></span>
<span id="cb362-5"><a href="gapminder.html#cb362-5"></a><span class="kw">geom_line</span>()</span></code></pre></div>
<p><img src="livro_files/figure-html/fertility-time-series-plot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>O gráfico mostra claramente como a taxa de fertilidade da Coréia do Sul caiu drasticamente durante as décadas de 1960 e 1970, e em 1990 teve uma taxa semelhante à da Alemanha.</p>
<div id="etiquetas-em-vez-de-legendas" class="section level3" number="9.4.1">
<h3><span class="header-section-number">9.4.1</span> Etiquetas em vez de legendas</h3>
<p>Para gráficos de tendências, recomendamos rotular as linhas em vez de usar legendas, pois o espectador pode ver rapidamente qual linha representa qual país. Essa sugestão se aplica à maioria dos gráficos: os rótulos geralmente são preferidos às legendas.</p>
<p>Demonstramos como fazer isso usando dados de expectativa de vida. Definimos uma tabela de dados com os locais dos rótulos e, em seguida, usamos uma segunda atribuição apenas para esses rótulos:</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="gapminder.html#cb363-1"></a>labels &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">country =</span> countries, <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1975</span>,<span class="dv">1965</span>), <span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">60</span>,<span class="dv">72</span>))</span>
<span id="cb363-2"><a href="gapminder.html#cb363-2"></a></span>
<span id="cb363-3"><a href="gapminder.html#cb363-3"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb363-4"><a href="gapminder.html#cb363-4"></a><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span>countries) <span class="op">%&gt;%</span></span>
<span id="cb363-5"><a href="gapminder.html#cb363-5"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, life_expectancy, <span class="dt">col =</span> country)) <span class="op">+</span></span>
<span id="cb363-6"><a href="gapminder.html#cb363-6"></a><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb363-7"><a href="gapminder.html#cb363-7"></a><span class="kw">geom_text</span>(<span class="dt">data =</span> labels, <span class="kw">aes</span>(x, y, <span class="dt">label =</span> country), <span class="dt">size =</span> <span class="dv">5</span>) <span class="op">+</span></span>
<span id="cb363-8"><a href="gapminder.html#cb363-8"></a><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/labels-better-than-legends-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>O gráfico mostra claramente como uma melhoria na expectativa de vida se seguiu a quedas nas taxas de fertilidade. Em 1960, os alemães viveram 15 anos a mais que os sul-coreanos, embora em 2010 a diferença esteja completamente fechada. Ele exemplifica a melhoria que muitos países não ocidentais fizeram nos últimos 40 anos.</p>
</div>
</div>
<div id="transformações-de-dados" class="section level2" number="9.5">
<h2><span class="header-section-number">9.5</span> Transformações de dados</h2>
<p>Agora voltamos nossa atenção para a segunda questão relacionada à idéia comum de que a distribuição da riqueza em todo o mundo piorou nas últimas décadas. Quando se pergunta ao público em geral se os países pobres se tornaram mais pobres e os países ricos se tornaram mais ricos, a maioria responde que sim. Usando camadas, histogramas, densidades suaves e gráficos de caixa, podemos ver se esse é realmente o caso. Primeiro, aprenderemos como as transformações às vezes podem ajudar a fornecer resumos e gráficos mais informativos.</p>
<p>A tabela de dados <code>gapminder</code> inclui uma coluna com o produto interno bruto do país, ou PIB. O PIB mede o valor de mercado de bens e serviços produzidos por um país em um ano. O PIB por pessoa é frequentemente usado como um resumo aproximado da riqueza de um país. Aqui, dividimos esse valor por 365 para obter a medida mais interpretável de <em>dólares por dia</em>. Usando o dólar atual como unidade, uma pessoa que sobrevive com uma renda inferior a US $ 2 por dia é definida como vivendo em “pobreza absoluta”. Nós adicionamos essa variável à tabela de dados:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="gapminder.html#cb364-1"></a>gapminder &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">dollars_per_day =</span> gdp<span class="op">/</span>population<span class="op">/</span><span class="dv">365</span>)</span></code></pre></div>
<p>Os valores do PIB são ajustados pela inflação e representam o dólar atual, portanto esses valores devem ser comparáveis ao longo dos anos. Obviamente, essas são as médias dos países e dentro de cada país há muita variabilidade. Todos os gráficos e idéias descritos abaixo se referem às médias dos países e não aos indivíduos dentro deles.</p>
<div id="transformação-logarítmica" class="section level3" number="9.5.1">
<h3><span class="header-section-number">9.5.1</span> Transformação logarítmica</h3>
<p>Abaixo está um histograma de ganhos diários de 1970:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="gapminder.html#cb365-1"></a>past_year &lt;-<span class="st"> </span><span class="dv">1970</span></span>
<span id="cb365-2"><a href="gapminder.html#cb365-2"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb365-3"><a href="gapminder.html#cb365-3"></a><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span></span>
<span id="cb365-4"><a href="gapminder.html#cb365-4"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day)) <span class="op">+</span></span>
<span id="cb365-5"><a href="gapminder.html#cb365-5"></a><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/dollars-per-day-distribution-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Nós usamos o argumento <code>color = "black"</code> traçar um limite e distinguir claramente os compartimentos.</p>
<p>Neste gráfico, vemos que para a maioria dos países, as médias estão abaixo de $10 por día. Sin embargo, la mayoría del eje-x está dedicado a 35 países con promedio de menos de $ 10. Portanto, o gráfico não é muito informativo em relação aos países com valores abaixo de $ 10 por dia.</p>
<p>Seria mais informativo ver rapidamente quantos países têm renda média diária de cerca de $1 (extremadamente pobre), $ 2 (muito ruim), $4 (pobre), $ 8 (média), $16 (acomodado), $ 32 (rico), $ 64 (muito rico) por dia. Essas mudanças são multiplicativas, e as transformações logarítmicas convertem as alterações multiplicativas em aditivos: quando a base 2 é usada, dobrar um valor se torna um aumento de 1.</p>
<p>Aqui está a distribuição se aplicarmos uma transformação logarítmica de base 2:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="gapminder.html#cb366-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb366-2"><a href="gapminder.html#cb366-2"></a><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span></span>
<span id="cb366-3"><a href="gapminder.html#cb366-3"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="kw">log2</span>(dollars_per_day))) <span class="op">+</span></span>
<span id="cb366-4"><a href="gapminder.html#cb366-4"></a><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/dollars-per-day-distribution-log-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>É assim que observamos mais de perto os países de renda média e baixa.</p>
</div>
<div id="qual-base" class="section level3" number="9.5.2">
<h3><span class="header-section-number">9.5.2</span> Qual base?</h3>
<p>No caso anterior, usamos a base 2 nas transformações logarítmicas. Outras opções comuns são básicas <span class="math inline">\(\mathrm{e}\)</span> (o logaritmo natural) e base 10.</p>
<p>Em geral, não recomendamos o uso do logaritmo natural para exploração e visualização de dados. A razão é porque enquanto <span class="math inline">\(2^2, 2^3, 2^4, \dots\)</span> ou <span class="math inline">\(10^2, 10^3, \dots\)</span> eles são fáceis de calcular em nossas cabeças, o mesmo não é verdade para <span class="math inline">\(\mathrm{e}^2, \mathrm{e}^3, \dots\)</span> portanto, a escala não é intuitiva nem fácil de interpretar.</p>
<p>No exemplo de dólares por dia, usamos a base 2 em vez da base 10 porque o intervalo resultante é mais fácil de interpretar. O intervalo dos valores plotados é 0.327, 48.885.</p>
<p>Na base 10, isso se torna um intervalo que inclui muito poucos números inteiros: apenas 0 e 1. Com a base dois, nosso intervalo inclui -2, -1, 0, 1, 2, 3, 4 e 5. É mais fácil de calcular <span class="math inline">\(2^x\)</span> e <span class="math inline">\(10^x\)</span> quando <span class="math inline">\(x\)</span> é um número inteiro e está entre -10 e 10, portanto, preferimos ter números inteiros menores na escala. Outra conseqüência de um intervalo limitado é que escolher a largura da bandeja (<em>binwidth</em> em inglês) é mais difícil. Com o log de base 2, sabemos que uma largura de compartimento de 1 se tornará um compartimento com alcance <span class="math inline">\(x\)</span> para <span class="math inline">\(2x\)</span>.</p>
<p>Para um exemplo em que a base 10 faz mais sentido, considere o tamanho da população. Um logaritmo de base 10 é preferível, pois o intervalo para eles é:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="gapminder.html#cb367-1"></a><span class="kw">filter</span>(gapminder, year <span class="op">==</span><span class="st"> </span>past_year) <span class="op">%&gt;%</span></span>
<span id="cb367-2"><a href="gapminder.html#cb367-2"></a><span class="kw">summarize</span>(<span class="dt">min =</span> <span class="kw">min</span>(population), <span class="dt">max =</span> <span class="kw">max</span>(population))</span>
<span id="cb367-3"><a href="gapminder.html#cb367-3"></a><span class="co">#&gt;     min      max</span></span>
<span id="cb367-4"><a href="gapminder.html#cb367-4"></a><span class="co">#&gt; 1 46075 8.09e+08</span></span></code></pre></div>
<p>Abaixo está o histograma dos valores transformados:</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="gapminder.html#cb368-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb368-2"><a href="gapminder.html#cb368-2"></a><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year) <span class="op">%&gt;%</span></span>
<span id="cb368-3"><a href="gapminder.html#cb368-3"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="kw">log10</span>(population))) <span class="op">+</span></span>
<span id="cb368-4"><a href="gapminder.html#cb368-4"></a><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="fl">0.5</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/population-histogram-log10-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>No gráfico acima, vemos rapidamente que as populações dos países variam entre dez bilhões e dez bilhões.</p>
</div>
<div id="transformar-valores-ou-escala" class="section level3" number="9.5.3">
<h3><span class="header-section-number">9.5.3</span> Transformar valores ou escala?</h3>
<p>Existem duas maneiras de usar transformações logarítmicas em gráficos. Podemos pegar o logaritmo dos valores antes de representá-los graficamente ou usar escalas logarítmicas nos eixos. Ambas as abordagens são úteis e têm vantagens diferentes. Se tomarmos o logaritmo dos dados, podemos interpretar mais facilmente os valores intermediários na escala. Por exemplo, se virmos:</p>
<p><code>----1----x----2--------3----</code></p>
<p>para dados transformados com o logaritmo, sabemos que o valor de <span class="math inline">\(x\)</span> é aproximadamente 1,5. Se usarmos escalas logarítmicas:</p>
<p><code>----1----x----10------100---</code></p>
<p>para determinar <code>x</code> precisamos calcular <span class="math inline">\(10^{1.5}\)</span>, o que não é fácil de fazer mentalmente. A vantagem de usar escalas logarítmicas é que vemos os valores originais nos eixos. No entanto, a vantagem de exibir escalas logarítmicas é que os valores originais são mostrados no gráfico e são mais fáceis de interpretar. Por exemplo, veríamos “US $ 32 por dia” em vez de “5 bases de log US $ 2 por dia”.</p>
<p>Como aprendemos anteriormente, se queremos escalar o eixo com logaritmos, podemos usar a função <code>scale_x_continuous</code>. Em vez de primeiro pegar o logaritmo dos valores, aplicamos esta camada:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="gapminder.html#cb369-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb369-2"><a href="gapminder.html#cb369-2"></a><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span></span>
<span id="cb369-3"><a href="gapminder.html#cb369-3"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day)) <span class="op">+</span></span>
<span id="cb369-4"><a href="gapminder.html#cb369-4"></a><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span></span>
<span id="cb369-5"><a href="gapminder.html#cb369-5"></a><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/dollars-per-day-log-scale-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Observe que a transformação logarítmica da base 10 tem sua própria função: <code>scale_x_log10()</code>, mas atualmente a base 2 não, embora possamos definir facilmente uma.</p>
<p>Outras transformações estão disponíveis através do argumento <code>trans</code>. Como aprenderemos mais adiante, a transformação da raiz quadrada ( <code>sqrt</code>) é útil ao considerar contagens. A transformação logística ( <code>logit</code>) é útil ao plotar proporções entre 0 e 1. A transformação <code>reverse</code> é útil quando queremos que os menores valores estejam à direita ou acima.</p>
</div>
</div>
<div id="como-visualizar-distribuições-multimodais" class="section level2" number="9.6">
<h2><span class="header-section-number">9.6</span> Como visualizar distribuições multimodais</h2>
<p>No histograma acima, vemos dois solavancos: um aos 4 e outro aos 32. Estatisticamente, esses solos às vezes são chamados de <em>modes</em>. O modo de uma distribuição é o valor com a frequência mais alta. O modo de distribuição normal é a média. Quando uma distribuição, como a acima, não diminui monotonicamente na moda, chamamos os lugares onde ela sobe e desce novamente - moda local - e dizemos que a distribuição tem - moda múltipla.</p>
<p>O histograma acima sugere que a distribuição de renda dos países em 1970 possui dois modos: um de aproximadamente US $ 2 por dia (1 na escala log 2) e outro de aproximadamente US $ 32 por dia (5 na escala log 2) . Essa bimodalidade é consistente com um mundo dicotômico composto por países com renda média inferior a US $ 8 (3 na escala log 2) por dia e países acima disso.</p>
</div>
<div id="como-comparar-várias-distribuições-com-gráficos-de-caixas-e-gráficos-ridge" class="section level2" number="9.7">
<h2><span class="header-section-number">9.7</span> Como comparar várias distribuições com gráficos de caixas e gráficos <em>ridge</em></h2>
<p>De acordo com o histograma, os valores da distribuição de renda para 1970 mostram uma dicotomia. No entanto, o histograma não nos mostra se os dois grupos de países estão no oeste ou em parte do mundo em desenvolvimento.</p>
<p>Vamos começar analisando rapidamente os dados por região. Reorganizamos as regiões pela mediana e usamos uma escala logarítmica.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="gapminder.html#cb370-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb370-2"><a href="gapminder.html#cb370-2"></a><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span></span>
<span id="cb370-3"><a href="gapminder.html#cb370-3"></a><span class="kw">mutate</span>(<span class="dt">region =</span> <span class="kw">reorder</span>(region, dollars_per_day, <span class="dt">FUN =</span> median)) <span class="op">%&gt;%</span></span>
<span id="cb370-4"><a href="gapminder.html#cb370-4"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day, region)) <span class="op">+</span></span>
<span id="cb370-5"><a href="gapminder.html#cb370-5"></a><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb370-6"><a href="gapminder.html#cb370-6"></a><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/unnamed-chunk-374-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Já podemos ver que existe de fato uma dicotomia “oeste versus o resto”: existem dois grupos claros, com o rico grupo constituído pela América do Norte, Europa do Norte e Ocidental, Nova Zelândia e Austrália. Definimos grupos com base nesta observação:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="gapminder.html#cb371-1"></a>gapminder &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></span>
<span id="cb371-2"><a href="gapminder.html#cb371-2"></a><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">case_when</span>(</span>
<span id="cb371-3"><a href="gapminder.html#cb371-3"></a>region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Western Europe&quot;</span>, <span class="st">&quot;Northern Europe&quot;</span>,<span class="st">&quot;Southern Europe&quot;</span>,</span>
<span id="cb371-4"><a href="gapminder.html#cb371-4"></a><span class="st">&quot;Northern America&quot;</span>,</span>
<span id="cb371-5"><a href="gapminder.html#cb371-5"></a><span class="st">&quot;Australia and New Zealand&quot;</span>) <span class="op">~</span><span class="st"> &quot;West&quot;</span>,</span>
<span id="cb371-6"><a href="gapminder.html#cb371-6"></a>region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Eastern Asia&quot;</span>, <span class="st">&quot;South-Eastern Asia&quot;</span>) <span class="op">~</span><span class="st"> &quot;East Asia&quot;</span>,</span>
<span id="cb371-7"><a href="gapminder.html#cb371-7"></a>region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Caribbean&quot;</span>, <span class="st">&quot;Central America&quot;</span>,</span>
<span id="cb371-8"><a href="gapminder.html#cb371-8"></a><span class="st">&quot;South America&quot;</span>) <span class="op">~</span><span class="st"> &quot;Latin America&quot;</span>,</span>
<span id="cb371-9"><a href="gapminder.html#cb371-9"></a>continent <span class="op">==</span><span class="st"> &quot;Africa&quot;</span> <span class="op">&amp;</span></span>
<span id="cb371-10"><a href="gapminder.html#cb371-10"></a>region <span class="op">!=</span><span class="st"> &quot;Northern Africa&quot;</span> <span class="op">~</span><span class="st"> &quot;Sub-Saharan&quot;</span>,</span>
<span id="cb371-11"><a href="gapminder.html#cb371-11"></a><span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Others&quot;</span>))</span></code></pre></div>
<p>Nós convertemos essa variável <code>group</code> em um fator para controlar a ordem dos níveis:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="gapminder.html#cb372-1"></a>gapminder &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></span>
<span id="cb372-2"><a href="gapminder.html#cb372-2"></a><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">factor</span>(group, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Others&quot;</span>, <span class="st">&quot;Latin America&quot;</span>,</span>
<span id="cb372-3"><a href="gapminder.html#cb372-3"></a><span class="st">&quot;East Asia&quot;</span>, <span class="st">&quot;Sub-Saharan&quot;</span>,</span>
<span id="cb372-4"><a href="gapminder.html#cb372-4"></a><span class="st">&quot;West&quot;</span>)))</span></code></pre></div>
<p>Na próxima seção, mostramos como visualizar e comparar distribuições entre grupos.</p>
<div id="diagrama-de-caixa" class="section level3" number="9.7.1">
<h3><span class="header-section-number">9.7.1</span> Diagrama de caixa</h3>
<p>A análise exploratória dos dados acima revelou duas características sobre a distribuição de renda média em 1970. Usando um histograma, encontramos uma distribuição bimodal com modos relacionados a países ricos e pobres. Agora, queremos comparar a distribuição entre esses cinco grupos para confirmar a dicotomia “oeste versus repouso”. O número de pontos em cada categoria é grande o suficiente para que um gráfico de resumo possa ser útil. Poderíamos gerar cinco histogramas ou cinco gráficos de densidade, mas pode ser mais prático ter todos os resumos visuais em um gráfico. Portanto, começamos empilhando diagramas de caixas um ao lado do outro. Observe que adicionamos a camada <code>theme(axis.text.x = element_text(angle = 90, hjust = 1))</code> para que os rótulos dos grupos sejam verticais, pois não cabem se os mostrarmos horizontalmente e para removê-los do eixo para liberar espaço.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="gapminder.html#cb373-1"></a>p &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></span>
<span id="cb373-2"><a href="gapminder.html#cb373-2"></a><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span></span>
<span id="cb373-3"><a href="gapminder.html#cb373-3"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(group, dollars_per_day)) <span class="op">+</span></span>
<span id="cb373-4"><a href="gapminder.html#cb373-4"></a><span class="kw">geom_boxplot</span>() <span class="op">+</span></span>
<span id="cb373-5"><a href="gapminder.html#cb373-5"></a><span class="kw">scale_y_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span></span>
<span id="cb373-6"><a href="gapminder.html#cb373-6"></a><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb373-7"><a href="gapminder.html#cb373-7"></a><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb373-8"><a href="gapminder.html#cb373-8"></a>p</span></code></pre></div>
<p><img src="livro_files/figure-html/dollars-per-day-boxplot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Os diagramas de caixa têm a limitação de que, resumindo os dados em cinco números, recursos importantes dos dados podem ser perdidos. Uma maneira de evitar isso é exibindo os dados.</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="gapminder.html#cb374-1"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/dollars-per-day-boxplot-with-data-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Gráficos ### <em>ridge</em></p>
<p>Mostrar cada ponto individual nem sempre revela características importantes da distribuição. Embora esse não seja o caso aqui, quando o número de pontos de dados é muito grande, acabamos sobrescrevendo e exibindo os dados pode sair pela culatra. Os diagramas de caixa ajudam nisso, fornecendo um resumo de cinco números, mas isso também tem limitações. Por exemplo, gráficos de caixa não revelam distribuições bimodais. Para ver isso, observe os dois gráficos abaixo que resumem o mesmo conjunto de dados:</p>
<p><img src="livro_files/figure-html/boxplot-dont-show-bimodal-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Nos casos em que estamos preocupados que o resumo do gráfico de caixa seja muito simplista, podemos exibir densidades suaves ou histogramas empilhados usando <em>ridge graphs</em>. Como estamos acostumados a visualizar densidades com valores no eixo x, as empilhamos verticalmente. Além disso, como precisamos de mais espaço nessa abordagem, é conveniente cobri-los. O pacote <strong>ggridges</strong> inclui uma função conveniente para fazer isso. Abaixo estão os dados da receita, mostrados acima com gráficos de caixa, mas agora exibidos com uma crista gráfica _.</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="gapminder.html#cb375-1"></a><span class="kw">library</span>(ggridges)</span>
<span id="cb375-2"><a href="gapminder.html#cb375-2"></a>p &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></span>
<span id="cb375-3"><a href="gapminder.html#cb375-3"></a><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(dollars_per_day)) <span class="op">%&gt;%</span></span>
<span id="cb375-4"><a href="gapminder.html#cb375-4"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day, group)) <span class="op">+</span></span>
<span id="cb375-5"><a href="gapminder.html#cb375-5"></a><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>)</span>
<span id="cb375-6"><a href="gapminder.html#cb375-6"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density_ridges</span>()</span></code></pre></div>
<p><img src="livro_files/figure-html/ridge-plot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Lembre-se de que precisamos investir o <code>x</code> e <code>y</code> que foram usados para o gráfico da caixa. Um parâmetro útil de <code>geom_density_ridges</code> é <code>scale</code>, o que lhes permite determinar quanto se sobrepõem; por exemplo, <code>scale = 1</code> significa que não há sobreposição. Valores maiores que 1 resultam em maior sobreposição.</p>
<p>Se o número de pontos de dados for pequeno o suficiente, podemos adicioná-los ao gráfico <em>ridge</em> usando o seguinte código:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="gapminder.html#cb376-1"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density_ridges</span>(<span class="dt">jittered_points =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/ridge-plot-with-points-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Por padrão, a altura dos pontos é <em>jittered</em> e não deve ser interpretada de forma alguma. Para exibir pontos de dados, mas sem usar <em>jitter</em>, podemos usar o código a seguir para adicionar o que é conhecido como uma representação <em>rug</em> dos dados.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="gapminder.html#cb377-1"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density_ridges</span>(<span class="dt">jittered_points =</span> <span class="ot">TRUE</span>,</span>
<span id="cb377-2"><a href="gapminder.html#cb377-2"></a><span class="dt">position =</span> <span class="kw">position_points_jitter</span>(<span class="dt">height =</span> <span class="dv">0</span>),</span>
<span id="cb377-3"><a href="gapminder.html#cb377-3"></a><span class="dt">point_shape =</span> <span class="st">&#39;|&#39;</span>, <span class="dt">point_size =</span> <span class="dv">3</span>,</span>
<span id="cb377-4"><a href="gapminder.html#cb377-4"></a><span class="dt">point_alpha =</span> <span class="dv">1</span>, <span class="dt">alpha =</span> <span class="fl">0.7</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/ridge-plot-with-rug-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="exemplo-distribuições-de-renda-1970-versus-2010" class="section level3" number="9.7.2">
<h3><span class="header-section-number">9.7.2</span> Exemplo: distribuições de renda 1970 versus 2010</h3>
<p>A exploração dos dados mostra claramente que em 1970 havia uma dicotomia “oeste versus o resto”. Mas essa dicotomia persiste? Vamos usar <code>facet_grid</code> para ver como as distribuições mudaram. Para começar, focamos em dois grupos: o oeste e o resto. Fazemos quatro histogramas.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="gapminder.html#cb378-1"></a>past_year &lt;-<span class="st"> </span><span class="dv">1970</span></span>
<span id="cb378-2"><a href="gapminder.html#cb378-2"></a>present_year &lt;-<span class="st"> </span><span class="dv">2010</span></span>
<span id="cb378-3"><a href="gapminder.html#cb378-3"></a>years &lt;-<span class="st"> </span><span class="kw">c</span>(past_year, present_year)</span>
<span id="cb378-4"><a href="gapminder.html#cb378-4"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb378-5"><a href="gapminder.html#cb378-5"></a><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>years <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(gdp)) <span class="op">%&gt;%</span></span>
<span id="cb378-6"><a href="gapminder.html#cb378-6"></a><span class="kw">mutate</span>(<span class="dt">west =</span> <span class="kw">ifelse</span>(group <span class="op">==</span><span class="st"> &quot;West&quot;</span>, <span class="st">&quot;West&quot;</span>, <span class="st">&quot;Developing&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb378-7"><a href="gapminder.html#cb378-7"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day)) <span class="op">+</span></span>
<span id="cb378-8"><a href="gapminder.html#cb378-8"></a><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span></span>
<span id="cb378-9"><a href="gapminder.html#cb378-9"></a><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span></span>
<span id="cb378-10"><a href="gapminder.html#cb378-10"></a><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>west)</span></code></pre></div>
<p><img src="livro_files/figure-html/income-hist-west-v-developing-two-years-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Antes de interpretar as conclusões deste gráfico, notamos que há mais países representados nos histogramas de 2010 do que em 1970: a contagem total é maior. Uma razão para isso é que vários países foram fundados após 1970. Por exemplo, a União Soviética foi dividida em diferentes países durante os anos 90. Outra razão é que mais dados estão disponíveis para mais países em 2010.</p>
<p>Nós refizemos os gráficos usando apenas países com dados disponíveis para os dois anos. Na parte <em>data wrangling</em> deste livro, aprenderemos como usar as ferramentas <strong>tidyverse</strong> que nos permitirão escrever código eficiente para isso, mas aqui podemos usar código simples usando a função <code>intersect</code>:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="gapminder.html#cb379-1"></a>country_list_<span class="dv">1</span> &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></span>
<span id="cb379-2"><a href="gapminder.html#cb379-2"></a><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>past_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(dollars_per_day)) <span class="op">%&gt;%</span></span>
<span id="cb379-3"><a href="gapminder.html#cb379-3"></a><span class="kw">pull</span>(country)</span>
<span id="cb379-4"><a href="gapminder.html#cb379-4"></a></span>
<span id="cb379-5"><a href="gapminder.html#cb379-5"></a>country_list_<span class="dv">2</span> &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></span>
<span id="cb379-6"><a href="gapminder.html#cb379-6"></a><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>present_year <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(dollars_per_day)) <span class="op">%&gt;%</span></span>
<span id="cb379-7"><a href="gapminder.html#cb379-7"></a><span class="kw">pull</span>(country)</span>
<span id="cb379-8"><a href="gapminder.html#cb379-8"></a></span>
<span id="cb379-9"><a href="gapminder.html#cb379-9"></a>country_list &lt;-<span class="st"> </span><span class="kw">intersect</span>(country_list_<span class="dv">1</span>, country_list_<span class="dv">2</span>)</span></code></pre></div>
<p>Estes 108 constituir
86% da população mundial, portanto esse subconjunto deve ser representativo.</p>
<p>Vamos refazer o gráfico, mas apenas para este subconjunto simplesmente adicionando <code>country %in% country_list</code> para a função <code>filter</code>:</p>
<p><img src="livro_files/figure-html/income-histogram-west-v-devel-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Agora vemos que os países ricos ficaram um pouco mais ricos, mas em termos de porcentagem, os países pobres parecem ter melhorado mais. Em particular, vemos que a proporção de países em desenvolvimento que ganha mais de US $ 16 por dia aumentou substancialmente.</p>
<p>Para ver quais regiões específicas melhoraram mais, podemos refazer os boxplots que fizemos anteriormente, mas agora adicionamos o ano de 2010 e usamos <em>facet</em> para comparar os dois anos.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="gapminder.html#cb380-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb380-2"><a href="gapminder.html#cb380-2"></a><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>years <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span>country_list) <span class="op">%&gt;%</span></span>
<span id="cb380-3"><a href="gapminder.html#cb380-3"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(group, dollars_per_day)) <span class="op">+</span></span>
<span id="cb380-4"><a href="gapminder.html#cb380-4"></a><span class="kw">geom_boxplot</span>() <span class="op">+</span></span>
<span id="cb380-5"><a href="gapminder.html#cb380-5"></a><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb380-6"><a href="gapminder.html#cb380-6"></a><span class="kw">scale_y_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span></span>
<span id="cb380-7"><a href="gapminder.html#cb380-7"></a><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb380-8"><a href="gapminder.html#cb380-8"></a><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>year)</span></code></pre></div>
<p><img src="livro_files/figure-html/income-histogram-by-region-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Aqui, fazemos uma pausa para introduzir outro recurso importante do <strong>ggplot2</strong>. Como queremos comparar cada região antes e depois, seria conveniente ter o diagrama de caixa de 1970 próximo ao de 2010 para cada região. Em geral, as comparações são mais fáceis quando os dados são plotados um ao lado do outro.</p>
<p>Portanto, em vez de nos separarmos em facetas, mantemos os dados de cada ano juntos e pedimos para colorir (ou preenchê-los) por ano. Observe que os grupos são separados automaticamente por ano e cada par de diagramas de caixas é desenhado lado a lado. Como o ano é um número, nós o tornamos um fator, já que <strong>ggplot2</strong> atribui automaticamente uma cor a cada categoria de um fator. Lembre-se que temos que converter as colunas <code>year</code> de numérico para fator.</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="gapminder.html#cb381-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb381-2"><a href="gapminder.html#cb381-2"></a><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>years <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span>country_list) <span class="op">%&gt;%</span></span>
<span id="cb381-3"><a href="gapminder.html#cb381-3"></a><span class="kw">mutate</span>(<span class="dt">year =</span> <span class="kw">factor</span>(year)) <span class="op">%&gt;%</span></span>
<span id="cb381-4"><a href="gapminder.html#cb381-4"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(group, dollars_per_day, <span class="dt">fill =</span> year)) <span class="op">+</span></span>
<span id="cb381-5"><a href="gapminder.html#cb381-5"></a><span class="kw">geom_boxplot</span>() <span class="op">+</span></span>
<span id="cb381-6"><a href="gapminder.html#cb381-6"></a><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb381-7"><a href="gapminder.html#cb381-7"></a><span class="kw">scale_y_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span></span>
<span id="cb381-8"><a href="gapminder.html#cb381-8"></a><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="livro_files/figure-html/income-histogram-west-v-devel-by-year-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Finalmente, destacamos que, se estivermos mais interessados em comparar os valores antes e depois, pode fazer mais sentido traçar aumentos percentuais. Ainda não estamos prontos para aprender como codificar isso, mas é assim que o gráfico seria:</p>
<p><img src="livro_files/figure-html/income-west-v-devel-before-after-ratio-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>A exploração de dados anteriores sugere que a diferença de renda entre países ricos e pobres diminuiu consideravelmente nos últimos 40 anos. Usamos uma série de histogramas e gráficos de caixa para ver isso. Sugerimos uma maneira sucinta de transmitir essa mensagem com apenas um gráfico.</p>
<p>Vamos começar observando que os gráficos de densidade para a distribuição de renda em 1970 e 2010 eles transmitem a mensagem de que a lacuna está se fechando:</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="gapminder.html#cb382-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb382-2"><a href="gapminder.html#cb382-2"></a><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>years <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span>country_list) <span class="op">%&gt;%</span></span>
<span id="cb382-3"><a href="gapminder.html#cb382-3"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day)) <span class="op">+</span></span>
<span id="cb382-4"><a href="gapminder.html#cb382-4"></a><span class="kw">geom_density</span>(<span class="dt">fill =</span> <span class="st">&quot;grey&quot;</span>) <span class="op">+</span></span>
<span id="cb382-5"><a href="gapminder.html#cb382-5"></a><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span></span>
<span id="cb382-6"><a href="gapminder.html#cb382-6"></a><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>year)</span></code></pre></div>
<p><img src="livro_files/figure-html/income-smooth-density-by-year-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>No gráfico de 1970 vemos duas tendências claras: países pobres e ricos. No 2010 alguns dos países pobres parecem ter mudado para a direita, diminuindo a diferença.</p>
<p>A próxima mensagem que devemos transmitir é que a razão para essa mudança na distribuição é que vários países pobres ficaram mais ricos do que alguns países ricos ficaram mais pobres. Para fazer isso, podemos atribuir uma cor aos grupos que identificamos durante a exploração de dados.</p>
<p>No entanto, precisamos primeiro aprender a suavizar essas densidades de maneira a preservar informações sobre o número de países em cada grupo. Para entender por que precisamos disso, lembre-se da discrepância no tamanho de cada grupo:</p>
<pre><code>#&gt; `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Developing
</th>
<th style="text-align:right;">
West
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
87
</td>
<td style="text-align:right;">
21
</td>
</tr>
</tbody>
</table>
<p>Porém, quando sobrepomos duas densidades, o comportamento padrão é que a área representada por cada distribuição some 1, independentemente do tamanho de cada grupo:</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="gapminder.html#cb384-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb384-2"><a href="gapminder.html#cb384-2"></a><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>years <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span>country_list) <span class="op">%&gt;%</span></span>
<span id="cb384-3"><a href="gapminder.html#cb384-3"></a><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">ifelse</span>(group <span class="op">==</span><span class="st"> &quot;West&quot;</span>, <span class="st">&quot;West&quot;</span>, <span class="st">&quot;Developing&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb384-4"><a href="gapminder.html#cb384-4"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day, <span class="dt">fill =</span> group)) <span class="op">+</span></span>
<span id="cb384-5"><a href="gapminder.html#cb384-5"></a><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span></span>
<span id="cb384-6"><a href="gapminder.html#cb384-6"></a><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>) <span class="op">+</span></span>
<span id="cb384-7"><a href="gapminder.html#cb384-7"></a><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>.)</span></code></pre></div>
<p><img src="livro_files/figure-html/income-smooth-density-by-year-west-v-developing-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>O gráfico acima mostra que há o mesmo número de países em cada grupo. Para mudar isso, precisaremos aprender como acessar as variáveis calculadas com a função <code>geom_density</code>.</p>
</div>
<div id="como-acessar-variáveis-calculadas" class="section level3" number="9.7.3">
<h3><span class="header-section-number">9.7.3</span> Como acessar variáveis calculadas</h3>
<p>Para tornar as áreas dessas densidades proporcionais ao tamanho do grupo, simplesmente multiplicamos os valores do eixo y pelo tamanho do grupo. No arquivo de ajuda de <code>geom_density</code>, vemos que as funções calculam uma variável chamada <code>count</code> quem faz exatamente isso. Queremos que essa variável, e não a densidade, esteja no eixo y.</p>
<p>Em <strong>ggplot2</strong>, obtemos acesso a essas variáveis cercando o nome com dois pontos. Portanto, usaremos o seguinte mapeamento:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="gapminder.html#cb385-1"></a><span class="kw">aes</span>(<span class="dt">x =</span> dollars_per_day, <span class="dt">y =</span> ..count..)</span></code></pre></div>
<p>Agora podemos criar o diagrama desejado simplesmente alterando o mapeamento no snippet de código acima. Também estenderemos os limites do eixo x.</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="gapminder.html#cb386-1"></a>p &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span></span>
<span id="cb386-2"><a href="gapminder.html#cb386-2"></a><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>years <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span>country_list) <span class="op">%&gt;%</span></span>
<span id="cb386-3"><a href="gapminder.html#cb386-3"></a><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">ifelse</span>(group <span class="op">==</span><span class="st"> &quot;West&quot;</span>, <span class="st">&quot;West&quot;</span>, <span class="st">&quot;Developing&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb386-4"><a href="gapminder.html#cb386-4"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day, <span class="dt">y =</span> ..count.., <span class="dt">fill =</span> group)) <span class="op">+</span></span>
<span id="cb386-5"><a href="gapminder.html#cb386-5"></a><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>, <span class="dt">limit =</span> <span class="kw">c</span>(<span class="fl">0.125</span>, <span class="dv">300</span>))</span>
<span id="cb386-6"><a href="gapminder.html#cb386-6"></a></span>
<span id="cb386-7"><a href="gapminder.html#cb386-7"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>) <span class="op">+</span></span>
<span id="cb386-8"><a href="gapminder.html#cb386-8"></a><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>.)</span></code></pre></div>
<p><img src="livro_files/figure-html/income-smooth-density-counts-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Se queremos que as densidades sejam mais suaves, usamos o argumento <code>bw</code> para que o mesmo parâmetro de suavização seja usado para cada densidade. Selecionamos 0,75 após testar vários valores.</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="gapminder.html#cb387-1"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>, <span class="dt">bw =</span> <span class="fl">0.75</span>) <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>.)</span></code></pre></div>
<p><img src="livro_files/figure-html/income-smooth-density-counts-by-year-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Este gráfico agora mostra o que está acontecendo muito claramente. A distribuição do mundo em desenvolvimento está mudando. Uma terceira tendência aparece, composta pelos países que mais diminuíram a diferença.</p>
<p>Para visualizar se algum dos grupos definidos acima é a principal causa dessas alterações, podemos criar rapidamente um gráfico <em>ridge</em>:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="gapminder.html#cb388-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb388-2"><a href="gapminder.html#cb388-2"></a><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>years <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(dollars_per_day)) <span class="op">%&gt;%</span></span>
<span id="cb388-3"><a href="gapminder.html#cb388-3"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day, group)) <span class="op">+</span></span>
<span id="cb388-4"><a href="gapminder.html#cb388-4"></a><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="op">+</span></span>
<span id="cb388-5"><a href="gapminder.html#cb388-5"></a><span class="kw">geom_density_ridges</span>(<span class="dt">adjust =</span> <span class="fl">1.5</span>) <span class="op">+</span></span>
<span id="cb388-6"><a href="gapminder.html#cb388-6"></a><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>year)</span></code></pre></div>
<p><img src="livro_files/figure-html/ridge-plot-income-five-regions-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Outra maneira de conseguir isso é empilhando as densidades umas sobre as outras:</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="gapminder.html#cb389-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb389-2"><a href="gapminder.html#cb389-2"></a><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>years <span class="op">&amp;</span><span class="st"> </span>country <span class="op">%in%</span><span class="st"> </span>country_list) <span class="op">%&gt;%</span></span>
<span id="cb389-3"><a href="gapminder.html#cb389-3"></a><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span></span>
<span id="cb389-4"><a href="gapminder.html#cb389-4"></a><span class="kw">mutate</span>(<span class="dt">weight =</span> population<span class="op">/</span><span class="kw">sum</span>(population)<span class="op">*</span><span class="dv">2</span>) <span class="op">%&gt;%</span></span>
<span id="cb389-5"><a href="gapminder.html#cb389-5"></a><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb389-6"><a href="gapminder.html#cb389-6"></a><span class="kw">ggplot</span>(<span class="kw">aes</span>(dollars_per_day, <span class="dt">fill =</span> group)) <span class="op">+</span></span>
<span id="cb389-7"><a href="gapminder.html#cb389-7"></a><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>, <span class="dt">limit =</span> <span class="kw">c</span>(<span class="fl">0.125</span>, <span class="dv">300</span>)) <span class="op">+</span></span>
<span id="cb389-8"><a href="gapminder.html#cb389-8"></a><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>, <span class="dt">bw =</span> <span class="fl">0.75</span>, <span class="dt">position =</span> <span class="st">&quot;stack&quot;</span>) <span class="op">+</span></span>
<span id="cb389-9"><a href="gapminder.html#cb389-9"></a><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>.)</span></code></pre></div>
<p><img src="livro_files/figure-html/income-smooth-density-counts-by-region-and-year-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Aqui podemos ver claramente como as distribuições para o leste da Ásia, América Latina e outros se deslocam visivelmente para a direita. Enquanto a África subsaariana permanece estagnada.</p>
<p>Observe que ordenamos os níveis do grupo para que a densidade do Ocidente seja grafada primeiro, depois na África Subsaariana. Tendo ambas as extremidades representadas graficamente primeiro, permite-nos ver melhor a bimodalidade restante.</p>
</div>
<div id="densidades-ponderadas" class="section level3" number="9.7.4">
<h3><span class="header-section-number">9.7.4</span> Densidades ponderadas</h3>
<p>Como ponto final, notamos que essas distribuições pesam cada país igualmente. Portanto, se a maioria da população está melhorando, mas morando em um país muito grande, como a China, talvez não gostemos disso. De fato, podemos ponderar as densidades suaves usando o argumento de mapeamento <code>weight</code>. O gráfico fica assim:</p>
<p><img src="livro_files/figure-html/income-smooth-density-counts-by-region-year-weighted-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Esta figura em particular mostra muito claramente como a lacuna na distribuição de renda está diminuindo e que a maioria dos países ainda em situação de pobreza está na África Subsaariana.</p>
</div>
</div>
<div id="a-falácia-ecológica-e-a-importância-de-mostrar-os-dados" class="section level2" number="9.8">
<h2><span class="header-section-number">9.8</span> A falácia ecológica e a importância de mostrar os dados</h2>
<p>Ao longo desta seção, comparamos regiões do mundo. Vimos que, em média, algumas regiões têm melhor desempenho que outras. Nesta seção, vamos nos concentrar na descrição da importância da variabilidade dentro dos grupos, examinando a relação entre as taxas de mortalidade infantil de um país e a renda média.</p>
<p>Definimos mais algumas regiões e comparamos as médias entre as regiões:</p>
<p><img src="livro_files/figure-html/ecological-fallacy-averages-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>A relação entre essas duas variáveis é quase perfeitamente linear e o gráfico mostra uma diferença dramática. Enquanto menos de 0,5% dos bebês morrem no Ocidente, na África Subsaariana a taxa é superior a 6%!</p>
<p>Observe que o gráfico usa uma nova transformação, a transformação logística.</p>
<div id="logit" class="section level3" number="9.8.1">
<h3><span class="header-section-number">9.8.1</span> Transformação de logística</h3>
<p>Transformação logística ou <em>logit</em> para uma proporção ou taxa <span class="math inline">\(p\)</span> é definido como:</p>
<p><span class="math display">\[f(p) = \log \left( \frac{p}{1-p} \right)\]</span></p>
<p>Quando <span class="math inline">\(p\)</span> é uma proporção ou probabilidade, a quantidade que transformamos com o logaritmo, <span class="math inline">\(p/(1-p)\)</span>, é chamado <em>odds</em>. Neste caso <span class="math inline">\(p\)</span> é a proporção de bebês que sobreviveram. Os filhos nos dizem quantos mais bebês devem sobreviver à morte. A transformação logarítmica torna simétrica. Se as taxas forem iguais, as <em>log odds</em> serão 0. Aumentos multiplicativos são convertidos em aumentos positivos ou negativos, respectivamente.</p>
<p>Essa escala é útil quando queremos destacar diferenças próximas de 0 ou 1. Para taxas de sobrevivência, isso é importante porque uma taxa de sobrevivência de 90% é inaceitável, enquanto uma sobrevivência de 99% é relativamente boa. Preferiríamos muito uma taxa de sobrevivência próxima de 99,9%. Queremos que nossa escala destaque essas diferenças e o <em>logit</em> o faz. Lembre-se de que 99,9/ 0,1 é aproximadamente 10 vezes maior que 99/1, que é aproximadamente 10 vezes maior que 90/10. Usando o logaritmo, esses incrementos multiplicativos são convertidos em aumentos constantes.</p>
</div>
<div id="mostrar-os-dados" class="section level3" number="9.8.2">
<h3><span class="header-section-number">9.8.2</span> Mostrar os dados</h3>
<p>Agora, de volta ao nosso gráfico. Com base no gráfico acima, concluímos que um país de baixa renda está destinado a ter uma baixa taxa de sobrevivência? Além disso, concluímos que as taxas de sobrevivência na África subsaariana são mais baixas do que no sul da Ásia, que por sua vez são mais baixas do que nas ilhas do Pacífico e assim por diante?</p>
<p>Saltar para esta conclusão com base em um gráfico mostrando médias é chamado de <em>falácia ecológica</em>. A relação quase perfeita entre taxas de sobrevivência e renda é observada apenas para médias regionais. Depois de mostrar todos os dados, vemos uma história mais complicada:</p>
<p><img src="livro_files/figure-html/ecological-fallacy-all-data-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Especificamente, vemos que há muita variabilidade. Vemos que os países nas mesmas regiões podem ser bem diferentes e que os países com a mesma renda podem ter taxas de sobrevivência diferentes. Por exemplo, enquanto a África Subsaariana teve os piores resultados econômicos e de saúde em média, há uma grande variabilidade dentro desse grupo. Maurício e Botsuana são melhores que Angola e Serra Leoa, com Maurício comparável aos países ocidentais.</p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="28">
<li id="fn28"><p><a href="https://en.wikipedia.org/wiki/Hans_Rosling" class="uri">https://en.wikipedia.org/wiki/Hans_Rosling</a><a href="gapminder.html#fnref28" class="footnote-back">↩︎</a></p></li>
<li id="fn29"><p><a href="http://www.gapminder.org/" class="uri">http://www.gapminder.org/</a><a href="gapminder.html#fnref29" class="footnote-back">↩︎</a></p></li>
<li id="fn30"><p><a href="https://www.ted.com/talks/hans_rosling_reveals_new_insights_on_poverty?language=en" class="uri">https://www.ted.com/talks/hans_rosling_reveals_new_insights_on_poverty?language=en</a><a href="gapminder.html#fnref30" class="footnote-back">↩︎</a></p></li>
<li id="fn31"><p><a href="https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen" class="uri">https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen</a><a href="gapminder.html#fnref31" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="distributions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="princípios-de-visualização-de-dados.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rafalab/dslivro/edit/master/dataviz/gapminder.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
